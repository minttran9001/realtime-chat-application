(this["webpackJsonprealtime-chat-app"]=this["webpackJsonprealtime-chat-app"]||[]).push([[0],{168:function(e,t,c){},169:function(e,t,c){},171:function(e,t,c){},182:function(e,t){},184:function(e,t){},195:function(e,t){},197:function(e,t){},225:function(e,t){},226:function(e,t){},231:function(e,t){},233:function(e,t){},240:function(e,t){},259:function(e,t){},294:function(e,t,c){},295:function(e,t,c){},296:function(e,t,c){},297:function(e,t,c){},298:function(e,t,c){},299:function(e,t,c){},300:function(e,t,c){},301:function(e,t,c){},302:function(e,t,c){},303:function(e,t,c){},304:function(e,t,c){},305:function(e,t,c){},306:function(e,t,c){},307:function(e,t,c){},308:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c(3),s=c.n(n),r=c(63),i=c.n(r),o=(c(168),c(169),c(18)),l=c(16),d=c(4),u=c(5),j=c.n(u),p=c(12),m=c(17),b=(c(171),c(10)),O=c(93);c(176),c(309),c(310);O.a.initializeApp({apiKey:"AIzaSyDhWHYUo31EhafDtO8OdAlDZthmVN85TPI",authDomain:"realtime-chat-ap.firebaseapp.com",projectId:"realtime-chat-ap",storageBucket:"realtime-chat-ap.appspot.com",messagingSenderId:"930254441751",appId:"1:930254441751:web:c256a9a83d26e7af4d7b52",measurementId:"G-8Q95J2GC5R"});var h=O.a,f="USER_LOGIN",v="USER_LOGOUT",x="UPDATE_USER_AVATAR",N="GET_REALTIME_USERS",y="UPDATE_MESSAGE",g="GET_REALTIME_MESSAGE",S="SET_SEEN_MESSAGE",E="GET_LOADMORE_MESSAGE",_="GET_USER_PROFILE_BY_ID",w="PUSH_POST",U="GET_REALTIME_POSTS",C="GET_POST_BY_KEY",k="PUSH_COMMENT",I="GET_REALTIME_POSTS_NEW_FEED",L="GET_REALTIME_INTERACTIONS",A="UPDATE_LIKES",R=c(178),T=c(289);c(290).config();var B="123123123ASACI9Z999CCAA911S12",F=function(e){return function(){var t=Object(p.a)(j.a.mark((function t(c){var a,n,s,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c({type:"".concat(f,"_REQUEST")}),a=h.firestore(),n=h.auth(),s=T.genSaltSync(10),r=T.hashSync(e.password,s),n.createUserWithEmailAndPassword(e.email,e.password).then((function(t){var n=h.auth().currentUser,s="".concat(e.firstName," ").concat(e.lastName);n.updateProfile({displayName:s}).then((function(){a.collection("users").doc(t.user.uid).set({firstName:e.firstName,lastName:e.lastName,createdAt:new Date,uid:t.user.uid,isOnline:!0,email:e.email,password:r}).then((function(){var c={auth:!0,token:R.sign({firstName:e.firstName,lastName:e.lastName,uid:t.user.uid,email:e.email,avatarUrl:e.avatarUrl},B,{expiresIn:150})};localStorage.setItem("user",JSON.stringify(c)),D()})).catch((function(e){c({type:"".concat(f,"_FAILURE"),payload:e})}))}))})).catch((function(e){c({type:"".concat(f,"_FAILURE"),payload:{error:e.message}})}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},D=function(){return function(){var e=Object(p.a)(j.a.mark((function e(t){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(c=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null)?(a=c.token)?R.verify(a,B,(function(e,c){e?h.firestore().collection("users").doc(c.uid).update({isOnline:!1}).then((function(){localStorage.clear(),t({type:"".concat(f,"_FAILURE"),payload:{error:"You have no permission. Please log in again"}})})):h.firestore().collection("users").doc(c.uid).update({isOnline:!0}).then((function(){t({type:"".concat(f,"_SUCCESS"),payload:{user:c}})}))})):(localStorage.clear(),t({type:"".concat(f,"_FAILURE"),payload:{error:"No token"}})):(localStorage.clear(),t({type:"".concat(f,"_FAILURE"),payload:{error:"Login again"}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(e){var t=e.msgObj,c=e.type;return function(){var e=Object(p.a)(j.a.mark((function e(a){var n,s,r,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"".concat(y,"_REQUEST")}),n=h.firestore(),"file"!==c?n.collection("conversations").add(Object(d.a)(Object(d.a)({},t),{},{type:"text",isView:!1,createdAt:new Date})).then((function(e){a({type:"".concat(y,"_SUCCESS")})})).catch((function(e){a({type:"".concat(y,"_REQUEST"),payload:{error:e.message}})})):(s=h.storage().ref(),r=new Date+"-"+t.file.name,i={contentType:t.file.type},s.child(r).put(t.file,i).then((function(e){e.ref.getDownloadURL().then((function(e){n.collection("conversations").add({user_uid_1:t.user_uid_1,user_uid_2:t.user_uid_2,file:e,type:"file",isView:!1,createdAt:new Date}).then((function(e){a({type:"".concat(y,"_SUCCESS")})})).catch((function(e){a({type:"".concat(y,"_REQUEST"),payload:{error:e.message}})}))}))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Q=function(e){var t=e.uid_1,c=e.uid_2;e.type;return function(){var e=Object(p.a)(j.a.mark((function e(a){var n,s,r,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"".concat(g,"_REQUEST")}),n=h.firestore(),s=n.collection("conversations").orderBy("createdAt","desc").where("user_uid_1","in",[c,t]),e.next=5,s.get();case 5:r=e.sent,i=r.docs[r.docs.length-1],n.collection("conversations").orderBy("createdAt","desc").where("user_uid_1","in",[t,c]).onSnapshot((function(e){var n=[];e.forEach((function(e){(e.data().user_uid_1===t&&e.data().user_uid_2===c||e.data().user_uid_1===c&&e.data().user_uid_2===t)&&n.push(e.data())})),a({type:"".concat(g,"_SUCCESS"),payload:{conversations:n.reverse(),lastestDoc:i}})}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},M=function(e){return function(){var t=Object(p.a)(j.a.mark((function t(c){var a,n,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c({type:"".concat(k,"_REQUEST")}),a=h.firestore(),n=a.collection("comments"),s=a.collection("posts"),n.add(Object(d.a)(Object(d.a)({},e),{},{createdAt:new Date,liked:0})).then((function(){s.doc(e.pid).update({commentCount:h.firestore.FieldValue.increment(1)}),c({type:"".concat(k,"_SUCCESS")})})).catch({type:"".concat(k,"_FAILURE")});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function W(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var G=function(e){return function(){var t=Object(p.a)(j.a.mark((function t(c){var a,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=h.firestore(),n=a.collection("posts"),a.collection("interactions").where("uid","==",e.uid).where("pid","==",e.pid).limit(1).get().then((function(t){var s={};t.forEach((function(e){s=Object(d.a)({key:e.id},e.data())})),W(s)?(c({type:"".concat(A,"_REQUEST")}),a.collection("interactions").add(Object(d.a)(Object(d.a)({},e),{},{createdAt:new Date})).then((function(){n.doc(e.pid).update({likeCount:h.firestore.FieldValue.increment(1)}),c({type:"".concat(A,"_SUCCESS")})})).catch((function(e){c({type:"".concat(A,"_FAILURE"),payload:{error:e}})}))):(c({type:"".concat(A,"_REQUEST")}),a.collection("interactions").doc(s.key).delete().then((function(){n.doc(e.pid).update({likeCount:h.firestore.FieldValue.increment(-1)}),c({type:"".concat(A,"_SUCCESS")})})).catch((function(e){c({type:"".concat(A,"_FAILURE"),payload:{error:e}})})))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},K=c.p+"static/media/Asset 2.5384deb3.png";function q(){var e=Object(b.c)((function(e){return e.auth})),t=Object(b.b)();return Object(a.jsx)("div",{className:"header",children:Object(a.jsxs)("div",{className:"navBar",children:[Object(a.jsx)(o.c,{to:"/realtime-chat-application",className:"logoArea",children:Object(a.jsx)("img",{src:K,alt:"logo"})}),Object(a.jsx)("div",{className:"navSide",children:e.authenticated?Object(a.jsxs)("ul",{className:"navWrap",children:[Object(a.jsx)("li",{className:"navItem",children:Object(a.jsx)(o.c,{to:"/realtime-chat-application",className:"navLink",children:"Message"})}),Object(a.jsx)("li",{className:"navItem",children:Object(a.jsx)(o.c,{to:"/newfeed",className:"navLink",children:"New Feed"})}),Object(a.jsx)("li",{className:"navItem",children:Object(a.jsxs)(o.c,{to:{pathname:"/profile/".concat(e.uid),state:{uid:e.uid}},className:"navLink",children:[e.firstName," Profile"]})}),Object(a.jsx)("li",{className:"navItem",children:Object(a.jsx)(o.b,{to:"#",onClick:function(){var c;t((c=e.uid,function(){var e=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"".concat(v,"_REQUEST")}),h.firestore().collection("users").doc(c).update({isOnline:!1}).then((function(){h.auth().signOut().then((function(){localStorage.clear(),t({type:"".concat(v,"_SUCCESS")})})).catch((function(e){t({type:"".concat(v,"_FAILURE"),payload:{error:e}})}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},className:"navLink",children:"Log out"})})]}):Object(a.jsxs)("ul",{className:"navWrap",children:[Object(a.jsx)("li",{className:"navItem",children:Object(a.jsx)(o.c,{to:"/realtime-chat-application",className:"navLink",children:"Message"})}),Object(a.jsx)("li",{className:"navItem",children:Object(a.jsx)(o.c,{to:"/newfeed",className:"navLink",children:"New Feed"})}),Object(a.jsx)("li",{className:"navItem",children:Object(a.jsx)(o.c,{to:"/login",className:"navLink",children:"Login"})}),Object(a.jsx)("li",{className:"navItem",children:Object(a.jsx)(o.c,{to:"/signup",className:"navLink",children:"Sign Up"})})]})})]})})}function V(e){return Object(a.jsxs)("div",{className:"layout",children:[Object(a.jsx)(q,{}),e.children]})}c(294);function H(e){var t=e.value,c=e.type,s=e.label,r=e.onChange,i=e.placeholder,o=Object(n.useState)("inputGroup"),l=Object(m.a)(o,2),d=l[0],u=l[1];return Object(a.jsxs)("div",{className:d,children:[Object(a.jsx)("label",{children:s}),Object(a.jsx)("input",{type:c,onFocus:function(e){u("inputGroup onFocus")},onChange:function(e){var t=e.target.value;r(t)},placeholder:i,value:t}),Object(a.jsx)("div",{className:"line"})]})}c(295);function J(e){return Object(a.jsx)("div",{className:"card",children:e.children})}c(296);function Y(e){return Object(a.jsx)("button",{type:e.type,onClick:e.onClick,className:"buttonGold",children:e.children})}c(297);function z(e){return Object(a.jsx)("div",{className:"title",children:Object(a.jsx)("p",{children:e.children})})}c(298);var Z=c(66),X=function(e){return Object(a.jsxs)("div",{className:"error",children:[Object(a.jsx)("p",{children:e.children}),Object(a.jsx)(Z.a,{className:"icon"})]})};function $(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.auth})),c=Object(n.useState)({email:"",password:"",firstName:"",lastName:""}),s=Object(m.a)(c,2),r=s[0],i=s[1],o=function(){var t=Object(p.a)(j.a.mark((function t(c){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c.preventDefault(),e(F(r));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return!0===t.authenticated?Object(a.jsx)(l.a,{to:"/realtime-chat-application"}):Object(a.jsx)(V,{children:Object(a.jsx)(J,{children:Object(a.jsxs)("form",{onSubmit:o,className:"authForm",children:[Object(a.jsx)(z,{children:"SIGN UP"}),Object(a.jsx)(H,{type:"text",label:"First name",placeholder:"",onChange:function(e){return i(Object(d.a)(Object(d.a)({},r),{},{firstName:e}))}}),Object(a.jsx)(H,{type:"text",label:"Last name",placeholder:"",onChange:function(e){return i(Object(d.a)(Object(d.a)({},r),{},{lastName:e}))}}),Object(a.jsx)(H,{type:"text",label:"Email",placeholder:"",onChange:function(e){return i(Object(d.a)(Object(d.a)({},r),{},{email:e}))}}),Object(a.jsx)(H,{type:"password",label:"Password",placeholder:"",onChange:function(e){return i(Object(d.a)(Object(d.a)({},r),{},{password:e}))}}),t.error?Object(a.jsx)(X,{children:t.error}):Object(a.jsx)(a.Fragment,{}),Object(a.jsx)(Y,{type:"submit",children:"SIGN UP"})]})})})}c(299);var ee=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.auth})),c=Object(n.useState)({email:"",password:""}),s=Object(m.a)(c,2),r=s[0],i=s[1];return!0===t.authenticated?Object(a.jsx)(l.a,{to:"/realtime-chat-application"}):Object(a.jsx)(V,{children:Object(a.jsx)(J,{children:Object(a.jsxs)("form",{onSubmit:function(t){var c;t.preventDefault(),e((c=r,function(){var e=Object(p.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"".concat(f,"_REQUEST")}),a=h.firestore(),n=h.auth(),a.collection("users").where("email","==",c.email).get().then((function(e){e.forEach((function(e){e.exists?T.compare(c.password,e.data().password,(function(e,s){s?n.signInWithEmailAndPassword(c.email,c.password).then((function(e){a.collection("users").doc(e.user.uid).update({isOnline:!0}).then((function(){for(var a=e.user.displayName.split(" "),n=e.user.photoURL,s=[],r=0;r<a.length;r++)s.push(a[r]);var i=a[0],o=a[1],l={auth:!0,token:R.sign({avatarUrl:n,firstName:i,lastName:o,uid:e.user.uid,email:c.email},B,{expiresIn:150})};localStorage.setItem("user",JSON.stringify(l)),t({type:"".concat(f,"_SUCCESS"),payload:{user:{avatarUrl:n,firstName:i,lastName:o,uid:e.user.uid,email:c.email}}})}))})):t({type:"".concat(f,"_FAILURE"),payload:{error:"User or password was wrong"}})})):t({type:"".concat(f,"_FAILURE"),payload:{error:"User doesn't exists"}})}))}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},className:"authForm",children:[Object(a.jsx)(z,{children:"Login"}),Object(a.jsx)(H,{type:"email",label:"Email",placeholder:"",onChange:function(e){return i(Object(d.a)(Object(d.a)({},r),{},{email:e}))}}),Object(a.jsx)(H,{type:"password",label:"Password",placeholder:"",onChange:function(e){return i(Object(d.a)(Object(d.a)({},r),{},{password:e}))}}),t.error?Object(a.jsx)(X,{children:t.error}):Object(a.jsx)(a.Fragment,{}),Object(a.jsx)(Y,{type:"submit",children:"LOG IN"})]})})})},te=c.p+"static/media/mint.98ef681e.jpg",ce=(c(300),c(9)),ae=c(34),ne=c(33),se=c(96),re=c.p+"static/media/noavtar.a69237c0.png",ie=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)(""),i=Object(m.a)(r,2),l=i[0],u=i[1],O=Object(n.useState)(""),f=Object(m.a)(O,2),v=f[0],x=f[1],y=Object(n.useState)(""),g=Object(m.a)(y,2),E=g[0],_=g[1],w=Object(b.b)(),U=Object(n.useState)(-1),C=Object(m.a)(U,2),k=C[0],I=C[1],L=Object(b.c)((function(e){return e.user})),A=L.users,R=L.conversations,T=L.loadingUser,B=L.loadingChat,F=(L.lastestDoc,Object(b.c)((function(e){return e.auth}))),D=function(){var e;w((e=F.uid,function(){var t=Object(p.a)(j.a.mark((function t(c){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c({type:"".concat(N,"_REQUEST")}),a=h.firestore(),void 0!==e&&a.collection("users").where("uid","!=",e).onSnapshot((function(e){var t=[];e.forEach((function(e){e.data().length!==t.length&&t.push(Object(d.a)({key:e.id},e.data()))})),c({type:"".concat(N,"_SUCCESS"),payload:{users:t}})}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))};Object(n.useEffect)((function(){D()}),[]);Object(n.useEffect)((function(){""!=l&&w(Q({uid_1:F.uid,uid_2:l.uid,type:"afterSend"}))}),[l]),Object(n.useEffect)((function(){if(""!=l&&!B){var e=document.getElementById("chatArea");e.scrollTop=e.scrollHeight}}),[R]),Object(n.useEffect)((function(){""!=E&&M.addEventListener("change",G)}),[E]);var M=document.getElementById("fileInput"),W=document.getElementById("messageImg"),G=function(e){document.querySelector(".fileSend").classList.add("hasFile"),W.src=URL.createObjectURL(M.files[0])},K=function(e){e.preventDefault();var t={user_uid_1:F.uid,user_uid_2:l.uid,message:v};""!==v&&(w(P({msgObj:t})),w(Q({uid_1:F.uid,uid_2:l.uid,type:"afterSend"})),x(""))},q=function(e){w(function(e){var t=e.uid_1,c=e.uid_2;return function(){var e=Object(p.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"".concat(S,"_REQUEST")}),h.firestore().collection("conversations").where("user_uid_1","==",c).where("user_uid_2","==",t).orderBy("createdAt","desc").onSnapshot((function(e){e.forEach((function(e){e.ref.update({isView:!0})}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({uid_1:F.uid,uid_2:l.uid}))};return Object(a.jsx)(V,{children:Object(a.jsxs)("div",{className:"homePage",children:[Object(a.jsx)("div",{className:"friendListWrap",children:T?Object(a.jsx)("div",{className:" loading",children:Object(a.jsx)(ae.a,{className:"icon"})}):Object(a.jsx)("div",{className:"friendList",children:A.map((function(e,t){return Object(a.jsxs)("div",{onClick:function(){!function(e){var t={uid_1:F.uid,uid_2:e.uid};u(e),w(Q(t))}(e),function(e){""!==c?(document.querySelectorAll(".friend")[c].classList.remove("isSelected"),document.querySelectorAll(".friend")[e].classList.add("isSelected"),s(e)):(document.querySelectorAll(".friend")[e].classList.add("isSelected"),s(e))}(t)},className:"friend",children:[Object(a.jsxs)("div",{className:"avatar",children:[Object(a.jsx)("img",{src:null!=e.avatarUrl?e.avatarUrl:re,alt:"avatar"}),Object(a.jsx)("span",{className:e.isOnline?"isOnline":"isOffline"})]}),Object(a.jsxs)("div",{className:"friendState",children:[Object(a.jsx)("p",{className:"friendName",children:e.firstName+" "+e.lastName}),Object(a.jsxs)("div",{className:"friendLastText",children:[Object(a.jsx)("p",{className:"lastText",children:"See you again "}),Object(a.jsx)("span",{}),Object(a.jsx)("p",{children:"4 hours ago"})]})]}),Object(a.jsx)("div",{className:"friendButton",onClick:function(e){t!==k?function(e,t){e.stopPropagation(),document.querySelectorAll(".userMenu")[t].classList.add("open"),I(t),k>=0&&document.querySelectorAll(".userMenu")[k].classList.remove("open")}(e,t):function(e){if(e.stopPropagation(),k>=0){var t=document.querySelectorAll(".userMenu")[k];e.target.className!==t&&(t.classList.remove("open"),I(-1))}}(e)},children:Object(a.jsxs)("button",{children:[Object(a.jsx)("div",{className:"circle"}),Object(a.jsx)("div",{className:"circle"}),Object(a.jsx)("div",{className:"circle"})]})}),Object(a.jsxs)("div",{className:"userMenu",children:[Object(a.jsxs)("div",{className:"menuGroup",children:[Object(a.jsxs)("div",{className:"menuItem",children:[Object(a.jsx)(ce.o,{className:"icon"}),Object(a.jsx)(o.c,{to:"/profile/".concat(e.key),children:"Go to profile page"})]}),Object(a.jsxs)("div",{className:"menuItem",children:[Object(a.jsx)(ce.b,{className:"icon"}),Object(a.jsx)("span",{children:"Turn off notification"})]})]}),Object(a.jsxs)("div",{className:"menuGroup",children:[Object(a.jsxs)("div",{className:"menuItem",children:[Object(a.jsx)(ce.e,{className:"icon"}),Object(a.jsx)("span",{children:"Delete conversation"})]}),Object(a.jsxs)("div",{className:"menuItem",children:[Object(a.jsx)(ce.i,{className:"icon"}),Object(a.jsx)("span",{children:"Block"})]})]})]})]},t)}))})}),""!==l?Object(a.jsxs)("div",{className:"chatBox",children:[Object(a.jsxs)("div",{className:"headBox",children:[Object(a.jsxs)("div",{className:"headUser",children:[Object(a.jsx)("img",{alt:"avatar",src:null!=l.avatarUrl?l.avatarUrl:re}),Object(a.jsx)(o.c,{to:"/profile/".concat(l.key),children:Object(a.jsx)("p",{children:l.firstName})})]}),Object(a.jsxs)("div",{className:"headCall",children:[Object(a.jsx)(ce.j,{className:"icon"}),Object(a.jsx)(ne.a,{className:"icon"}),Object(a.jsx)(ce.h,{className:"icon"})]})]}),B?Object(a.jsx)("div",{className:"chatArea loading",children:Object(a.jsx)(ae.a,{className:"icon"})}):Object(a.jsx)("div",{onScroll:function(){var e=document.body,t=document.querySelector(".chatArea");(t=t.clientHeight?t:e).scrollTop},id:"chatArea",className:"chatArea",children:Object(a.jsx)("div",{className:"chatAreaWrap",children:R.map((function(e,t){return Object(a.jsxs)("div",{className:F.uid===e.user_uid_1?"chatWrapper right":"chatWrapper left",children:[F.uid!==e.user_uid_1?Object(a.jsx)("img",{alt:t,className:"avatar",src:null!==l.avatarUrl?l.avatarUrl:re}):Object(a.jsx)(a.Fragment,{}),"file"!==e.type?Object(a.jsx)("div",{className:"messageWrap",children:Object(a.jsx)("p",{children:e.message},t)}):Object(a.jsx)("img",{className:"messageFile",alt:t,src:e.file},t),Object(a.jsx)(ce.c,{className:F.uid!==e.user_uid_1||e.isView?"icon gone":"icon"})]},t)}))})}),Object(a.jsxs)("div",{className:"typeArea",children:[Object(a.jsxs)("div",{className:"action",children:[Object(a.jsxs)("div",{className:"fileSend",children:[Object(a.jsx)("img",{alt:"messageImg",id:"messageImg"}),Object(a.jsx)("div",{className:"before"}),Object(a.jsx)(ce.m,{onClick:function(e){e.preventDefault();var t={user_uid_1:F.uid,user_uid_2:l.uid,file:M.files[0]};w(P({msgObj:t,type:"file"})),document.querySelector(".fileSend").classList.remove("hasFile"),W.src="",w(Q({uid_1:F.uid,uid_2:l.uid,type:"afterSend"}))},className:"icon"})]}),Object(a.jsxs)("div",{className:"actionWrap",children:[Object(a.jsx)("input",{type:"file",className:"fileInput"}),Object(a.jsx)(ce.l,{className:"icon"})]}),Object(a.jsxs)("div",{className:"actionWrap",children:[Object(a.jsx)("input",{type:"file",id:"fileInput",className:"fileInput"}),Object(a.jsx)(ce.k,{onClick:function(e){M.click(),_("advanced")},className:"icon"})]}),Object(a.jsxs)("div",{className:"actionWrap",children:[Object(a.jsx)("input",{type:"file",className:"fileInput"}),Object(a.jsx)(se.a,{className:"icon"})]}),Object(a.jsxs)("div",{className:"actionWrap",children:[Object(a.jsx)("input",{type:"file",className:"fileInput"}),Object(a.jsx)(ce.f,{className:"icon"})]})]}),Object(a.jsxs)("div",{className:"input",children:[Object(a.jsx)("form",{onSubmit:K,children:Object(a.jsx)("input",{value:v,onClick:function(){return q()},onChange:function(e){return x(e.target.value)},type:"text",placeholder:"Aa"})}),Object(a.jsx)(se.a,{className:"icon"})]}),Object(a.jsx)("div",{className:"likeButton",children:""===v?Object(a.jsx)(ce.g,{className:"icon"}):Object(a.jsx)(ce.m,{onClick:K,className:"icon"})})]})]}):Object(a.jsxs)("div",{className:"chatBox unSelected",children:[Object(a.jsx)(Z.b,{className:"bigIcon"}),Object(a.jsx)(z,{children:"Your Message"}),Object(a.jsx)("p",{children:"Send private photos and messages to a friend or group."}),Object(a.jsx)(Y,{children:"Send a message"})]})]})})},oe=(c(301),c(46)),le=(c(302),c(67));c(303);function de(){return Object(a.jsx)(ae.a,{className:"loadingIcon"})}var ue=function(e){var t=e.auth,c=Object(b.b)(),n=s.a.useState([]),r=Object(m.a)(n,2),i=r[0],o=r[1],l=s.a.useState(""),d=Object(m.a)(l,2),u=d[0],O=d[1],f=Object(b.c)((function(e){return e})),v=f.post,x=f.interaction,N=s.a.useMemo((function(){return t}),[t]),y=s.a.useMemo((function(){return x.interactions}),[x.interactions]),g=s.a.useMemo((function(){return{item:v.postByKey.item,loading:v.postByKey.loading,comments:v.postByKey.comments}}),[v.postByKey.item,v.postByKey.comments]),S=g.item,E=g.loading,_=g.comments;s.a.useEffect((function(){var e;c((e=S.key,function(){var t=Object(p.a)(j.a.mark((function t(c){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:void 0!=e&&(a=h.firestore(),c({type:"".concat(L,"_REQUEST")}),a.collection("interactions").where("pid","==",e).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),c({type:"".concat(L,"_SUCCESS"),payload:{interactions:t}})})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),[S.key,c]);var w=function(){var e={pid:S.key,uid:N};c(G(e))};return Object(a.jsxs)("div",{className:"postDetail",children:[Object(a.jsx)(ce.d,{className:"exit",onClick:function(){document.querySelector(".postDetail").classList.remove("open");var e=document.querySelector(".replies");if(null!=e){e.classList.remove("view");o([])}}}),E?Object(a.jsx)(de,{}):Object(a.jsxs)("div",{className:"postWrapper",children:[Object(a.jsx)("div",{className:"postImage",children:Object(a.jsx)("img",{src:S.file,alt:S.key})}),Object(a.jsxs)("div",{className:"postStatus",children:[Object(a.jsxs)("div",{className:"postOwner",children:[Object(a.jsxs)("div",{className:"ownerAvatar",children:[Object(a.jsx)("div",{children:Object(a.jsx)("img",{src:S.owner.avatarUrl,alt:S.key})}),Object(a.jsx)("p",{children:S.owner.firstName+" "+S.owner.lastName})]}),Object(a.jsxs)("div",{className:"more",children:[Object(a.jsx)("div",{className:"circle"}),Object(a.jsx)("div",{className:"circle"}),Object(a.jsx)("div",{className:"circle"})]})]}),Object(a.jsxs)("div",{className:"postDescription",children:[Object(a.jsxs)("div",{className:"ownerAvatar",children:[Object(a.jsx)("div",{children:Object(a.jsx)("img",{src:S.owner.avatarUrl,alt:S.key})}),Object(a.jsx)("p",{className:"name",children:S.owner.firstName+" "+S.owner.lastName}),Object(a.jsx)("p",{className:"status",children:S.status})]}),Object(a.jsx)("div",{className:"postedDate",children:Object(a.jsx)("p",{children:"6d"})}),Object(a.jsx)("div",{className:"commentBox",children:_.map((function(e,t){return Object(a.jsxs)("div",{className:"comment",children:[Object(a.jsx)("div",{className:"ownerImage",children:Object(a.jsx)("div",{className:"wrap",children:Object(a.jsx)("img",{src:e.sender.avatarUrl,alt:e.sender.firstName})})}),Object(a.jsxs)("div",{className:"ownerDetail",children:[Object(a.jsx)("div",{className:"ownerName",children:Object(a.jsxs)("div",{className:"content",children:[" ",Object(a.jsx)("p",{children:e.sender.firstName}),Object(a.jsx)("p",{children:e.content})]})}),Object(a.jsxs)("div",{className:"reply",children:[Object(a.jsx)("span",{children:"4d"}),Object(a.jsx)("p",{children:"Reply"}),Object(a.jsx)("div",{className:"heartIcon",children:Object(a.jsx)(ce.g,{className:"icon"})})]}),Object(a.jsxs)("div",{className:"viewReplies",children:[Object(a.jsx)("div",{className:"line"}),i[t]?Object(a.jsx)("p",{onClick:function(){return function(e){var t=Object(oe.a)(i);document.querySelectorAll(".replies")[e].classList.remove("view"),t[e]=!1,o(t)}(t)},children:"Hide replies(2)"}):Object(a.jsx)("p",{onClick:function(){return function(e){var t=Object(oe.a)(i);document.querySelectorAll(".replies")[e].classList.add("view"),t[e]=!0,o(t)}(t)},children:"View replies(2)"})]}),Object(a.jsx)("div",{className:"replies",children:Object(a.jsxs)("div",{className:"replyItem",children:[Object(a.jsx)("div",{className:"ownerImage",children:Object(a.jsx)("img",{src:te,alt:te})}),Object(a.jsxs)("div",{className:"ownerDetail",children:[Object(a.jsx)("div",{className:"ownerName",children:Object(a.jsxs)("div",{className:"content",children:[" ",Object(a.jsx)("p",{children:"mint_stillwalks"}),Object(a.jsx)("p",{children:e.content})]})}),Object(a.jsxs)("div",{className:"reply",children:[Object(a.jsx)("span",{children:"4d"}),Object(a.jsx)("p",{children:"Reply"}),Object(a.jsx)("div",{className:"heartIcon",children:Object(a.jsx)(ce.g,{className:"icon"})})]})]})]})})]})]},t)}))}),Object(a.jsxs)("div",{className:"postLiked",children:[Object(a.jsxs)("div",{className:"iconBox",children:[Object(a.jsxs)("div",{className:"likeIcon",children:[function(e){if(console.log(y),e.length>0){for(var t=0;t<e.length;t++)if(console.log(e[t].uid),e[t].uid===N)return!0;return!1}return!1}(y)?Object(a.jsx)(ce.a,{onClick:w,className:"icon"}):Object(a.jsx)(ce.g,{onClick:w,className:"icon"}),Object(a.jsx)(ne.b,{className:"icon"}),Object(a.jsx)(ce.m,{className:"icon"})]}),Object(a.jsx)("div",{className:"saveIcon",children:Object(a.jsx)(le.a,{className:"icon"})})]}),Object(a.jsxs)("div",{className:"likedBy",children:[Object(a.jsxs)("p",{children:["Liked by ",y.length," peoples"]}),Object(a.jsx)("p",{children:S.createdAt.toDate().toDateString()})]})]}),Object(a.jsxs)("form",{className:"commentInput",children:[Object(a.jsx)("div",{className:"input",children:Object(a.jsx)("input",{onChange:function(e){return O(e.target.value)},value:u,id:"postComment",placeholder:"Add comment here"})}),Object(a.jsx)("div",{className:"button",children:Object(a.jsx)(Y,{type:"submit",onClick:function(e){e.preventDefault();var t={content:u,pid:S.key,uid:N};c(M(t)),O("")},children:"Post"})})]})]})]})]})]})},je=(c(304),function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.auth})),c=s.a.useState(""),n=Object(m.a)(c,2),r=n[0],i=n[1],o=document.getElementById("filePost"),l=document.getElementById("postImageElement"),d=document.querySelector(".imageBox"),u=function(e){d.classList.add("hasFile"),o.files.length>0&&(l.src=URL.createObjectURL(o.files[0])),i("")};s.a.useEffect((function(){""!=r&&o.addEventListener("change",u)}),[r]);return Object(a.jsx)("div",{className:"modalPost",children:Object(a.jsxs)("div",{className:"modalWrapper",children:[Object(a.jsxs)("div",{className:"head",children:[Object(a.jsx)("div",{className:"title",children:Object(a.jsx)(z,{children:"Make a post"})}),Object(a.jsx)(ce.d,{onClick:function(){document.querySelector(".modalPost").classList.remove("open")},className:"icon"})]}),Object(a.jsxs)("div",{className:"poster",children:[Object(a.jsx)("div",{className:"posterImage",children:Object(a.jsx)("img",{src:te})}),Object(a.jsxs)("div",{className:"posterName",children:[Object(a.jsx)("p",{children:"Mint"}),Object(a.jsxs)("div",{className:"securityMode",children:[Object(a.jsx)(ae.b,{className:"icon"}),Object(a.jsx)("span",{children:"Private"})]})]})]}),Object(a.jsxs)("div",{className:"statusBox",children:[Object(a.jsx)("textarea",{id:"postText",placeholder:"What are you thinking ?"}),Object(a.jsx)("div",{className:"imageBox",children:Object(a.jsx)("img",{id:"postImageElement"})})]}),Object(a.jsxs)("div",{className:"postButton",children:[Object(a.jsx)(Y,{onClick:function(){var c=document.getElementById("postText").value;if(o.files.length>0){var a={file:o.files[0],status:c,uid:t.uid};e(function(e){return function(){var t=Object(p.a)(j.a.mark((function t(c){var a,n,s,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c({type:"".concat(w,"_REQUEST")}),a=h.firestore(),n=h.storage().ref(),s=new Date+"-"+e.file.name,r={contentType:e.file.type},n.child(s).put(e.file,r).then((function(t){t.ref.getDownloadURL().then((function(t){a.collection("posts").add({file:t,createdAt:new Date,status:e.status,uid:e.uid,likeCount:0,commentCount:0}).then((function(){c({type:"".concat(w,"_SUCCESS")})})).catch((function(e){c({type:"".concat(w,"_FAILURE"),payload:{error:e}})}))}))}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(a)),d.classList.remove("hasFile"),l.src="",c=""}},children:"Post"}),Object(a.jsxs)("div",{className:"postIcon",children:[Object(a.jsx)("input",{type:"file",id:"filePost"}),Object(a.jsx)(ce.k,{onClick:function(){o.click(),i("advanced")},className:"icon"}),Object(a.jsx)(ae.c,{className:"icon"})]})]})]})})}),pe=(c(305),function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.auth})),c=Object(n.useState)(""),s=Object(m.a)(c,2),r=s[0],i=s[1],o=function(){O.classList.remove("open")},l=Object(n.useRef)(null),u=Object(n.useRef)(null),O=Object(n.useRef)(null),f=function(){l.files.length>0&&(u.src=URL.createObjectURL(l.files[0]))};return Object(n.useEffect)((function(){"advanced"==r&&l.addEventListener("change",f)}),[r]),Object(a.jsx)("div",{ref:function(e){return O=e},className:"modalUpdateAvatar",children:Object(a.jsxs)("div",{className:"modalWrapper",children:[Object(a.jsx)(ce.d,{onClick:o,className:"icon"}),Object(a.jsx)("div",{className:"modalTitle",children:Object(a.jsx)("p",{children:"Update Avatar"})}),Object(a.jsxs)("div",{className:"openFile",children:[Object(a.jsx)("button",{onClick:function(){l.click(),i("advanced")},children:"Choose a file"}),Object(a.jsx)("input",{type:"file",className:"input",ref:function(e){l=e}})]}),Object(a.jsx)("div",{className:"avatarBox",children:Object(a.jsx)("div",{className:"avatarWrap",children:Object(a.jsx)("img",{id:"image",ref:function(e){u=e}})})}),Object(a.jsxs)("div",{className:"updateBtn",children:[Object(a.jsx)(Y,{onClick:function(){var c,a;e((c=t.uid,a=l.files[0],function(){var e=Object(p.a)(j.a.mark((function e(t){var n,s,r,i,o,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"".concat(x,"_REQUEST")}),n=h.firestore(),s=h.storage().ref(),r=new Date+"-"+a.name,i=a.type,o=s.child(r).put(a,i),l=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null,o.then((function(e){e.ref.getDownloadURL().then((function(e){h.auth().currentUser.updateProfile({photoURL:e}),n.collection("users").doc(c).update({avatarUrl:e}),l=Object(d.a)(Object(d.a)({},l.user),{},{avatarUrl:e})})).then((function(){t({type:"".concat(x,"_SUCCESS"),payload:{notify:"Update successfully",avatarUrl:l.avatarUrl}})})).catch((function(e){t({type:"".concat(x,"_FALURE"),payload:{error:e}})}))}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:"Save"}),Object(a.jsx)(Y,{onClick:o,children:"Cancel"})]})]})})}),me=function(e){var t=Object(b.b)(),c=Object(b.c)((function(e){return e})),n=c.user,r=c.auth,i=s.a.useMemo((function(){return n.userByKey}),[n.userByKey]),o=s.a.useMemo((function(){return r.uid}),[r.uid]),l=s.a.useMemo((function(){return e.match.params}),[e.match.params]);s.a.useEffect((function(){t(function(e){var t=e.uid;return function(){var e=Object(p.a)(j.a.mark((function e(c){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c({type:"".concat(_,"_REQUEST")}),a=h.firestore(),n=a.collection("users"),a.collection("posts").where("uid","==",t).onSnapshot(function(){var e=Object(p.a)(j.a.mark((function e(a){var s,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],a.forEach((function(e){s.push(Object(d.a)({key:e.id},e.data()))})),e.next=4,n.doc(t).get();case 4:r=e.sent.data(),c({type:"".concat(_,"_SUCCESS"),payload:{userByKey:Object(d.a)(Object(d.a)({},r),{},{posts:s})}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(l))}),[l]);var u=function(e){document.querySelector(".postDetail").classList.add("open"),t(function(e,t){return function(){var c=Object(p.a)(j.a.mark((function c(a){var n,s,r,i;return j.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:a({type:"".concat(C,"_REQUEST")}),n=h.firestore(),s=n.collection("posts"),r=n.collection("users"),i=n.collection("comments"),s.get().then((function(c){var n={};i.orderBy("createdAt","desc").where("pid","==",e).onSnapshot(function(){var s=Object(p.a)(j.a.mark((function s(i){var o,l;return j.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return o=[],i.forEach((function(e){r.where("uid","==",e.data().uid).onSnapshot((function(t){t.forEach((function(t){o.push(Object(d.a)({sender:t.data()},e.data()))}))}))})),s.next=4,r.doc(t).get();case 4:l=s.sent,c.forEach((function(t){t.id===e&&(n=Object(d.a)(Object(d.a)({key:t.id},t.data()),{},{owner:l.data()}))})),a(n!=={}?{type:"".concat(C,"_SUCCESS"),payload:{postItem:n,comments:o}}:{type:"".concat(C,"_FAILURE"),payload:{error:"Item with key ".concat(e," does not exist")}});case 7:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}())}));case 6:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(e,i.uid))};return Object(a.jsxs)(V,{children:[Object(a.jsx)(je,{}),Object(a.jsx)(pe,{}),Object(a.jsx)(ue,{auth:o}),n.loadingUserByKey?Object(a.jsx)("div",{className:"loadingWrap",children:Object(a.jsx)(de,{})}):Object(a.jsxs)("div",{className:"profile",children:[Object(a.jsxs)("div",{className:"profileHead",children:[Object(a.jsxs)("div",{className:"avatar",children:[Object(a.jsx)("div",{className:"avatarWrap",children:Object(a.jsx)("img",{src:null!=i.avatarUrl?i.avatarUrl:re,alt:"avatar"})}),Object(a.jsx)(ce.l,{onClick:function(){document.querySelector(".modalUpdateAvatar").classList.add("open")},className:"icon"})]}),Object(a.jsxs)("div",{className:"details",children:[Object(a.jsxs)("div",{className:"userName",children:[Object(a.jsx)("p",{children:i.firstName+" "+i.lastName}),Object(a.jsx)(Y,{children:o===i.uid?"Edit Profile":"Follow"}),Object(a.jsx)(ce.n,{className:"icon"})]}),Object(a.jsxs)("div",{className:"userFollow",children:[Object(a.jsxs)("p",{children:["282 ",Object(a.jsx)("span",{children:"followers"})]}),Object(a.jsxs)("p",{children:["1003 ",Object(a.jsx)("span",{children:"following"})]})]}),Object(a.jsx)("div",{className:"madeUpName",children:Object(a.jsx)("p",{children:"\u5c0f\u3055\u306a\u30db\u30bf\u30eb"})})]})]}),o===i.uid?Object(a.jsx)("div",{className:"postButton",children:Object(a.jsx)(Y,{onClick:function(){document.querySelector(".modalPost").classList.add("open")},children:"Post something"})}):Object(a.jsx)(a.Fragment,{}),Object(a.jsx)("div",{className:"allPosts",children:i.posts.length>0?i.posts.map((function(e){return Object(a.jsxs)("div",{onClick:function(){return u(e.key)},className:"post",children:[Object(a.jsx)("div",{className:"postImage",children:Object(a.jsx)("img",{alt:e.createdAt,src:e.file})}),Object(a.jsxs)("div",{className:"postHover",children:[Object(a.jsxs)("p",{children:[Object(a.jsx)(ce.g,{className:"icon"})," ",e.likeCount]}),Object(a.jsxs)("p",{children:[Object(a.jsx)(ne.b,{className:"icon"})," ",e.commentCount]})]})]},e.key)})):Object(a.jsx)("div",{className:"post",children:Object(a.jsx)("p",{children:"Havent posted anything"})})})]})]})},be=(c(306),c(160)),Oe=c.n(be);c(307);function he(e){return Object(a.jsxs)("form",{onSubmit:function(t){return e.handleFunction(t)},style:e.style,className:"commentInput",children:[Object(a.jsx)("div",{className:"input",children:Object(a.jsx)("input",{onChange:function(t){return function(t){e.onChange(t.target.value)}(t)},value:e.value,id:"postComment",placeholder:"Add comment here"})}),Object(a.jsx)("div",{className:"button",children:Object(a.jsx)(Y,{onClick:function(t){return e.handleFunction(t)},type:e.type,children:"Post"})})]})}var fe=function(){var e=Object(b.b)(),t=Object(n.useState)(""),c=Object(m.a)(t,2),r=c[0],i=c[1],l=Object(b.c)((function(e){return e})),u=l.post,O=l.auth,f=s.a.useMemo((function(){return u.posts}),[u.posts]);s.a.useEffect((function(){e(function(){var e=Object(p.a)(j.a.mark((function e(t){var c,a,n,s,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"".concat(I,"_REQUEST")}),c=h.firestore(),a=c.collection("users"),n=c.collection("posts"),s=c.collection("comments"),r=c.collection("interactions"),n.onSnapshot(function(){var e=Object(p.a)(j.a.mark((function e(c){var n,i,o,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],c.forEach((function(e){n.push(Object(d.a)({key:e.id,comments:[],interactions:[]},e.data()))})),i=0,o=j.a.mark((function e(c){var o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.doc(n[c].uid).get(),s.where("pid","==",n[c].key).onSnapshot((function(e){e.forEach((function(e){a.where("uid","==",e.data().uid).onSnapshot((function(t){t.forEach((function(t){n[c].comments.push(Object(d.a)(Object(d.a)({},e.data()),{},{sender:t.data()}))}))}))}))})),r.where("pid","==",n[c].key).onSnapshot((function(e){e.forEach((function(e){a.where("uid","==",e.data().uid).onSnapshot((function(t){t.forEach((function(t){n[c].interactions.push(Object(d.a)(Object(d.a)({},e.data()),{},{sender:t.data()}))}))}))}))})),e.next=5,o;case 5:n[c].owner=e.sent.data(),i===n.length-1&&t({type:"".concat(I,"_SUCCESS"),payload:{posts:[].concat(n)}}),i+=1;case 8:case"end":return e.stop()}}),e)})),l=0;case 5:if(!(l<n.length)){e.next=10;break}return e.delegateYield(o(l),"t0",7);case 7:l++,e.next=5;break;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var v=function(t){var c={pid:t,uid:O.uid};e(G(c))},x=function(e){if(e.length>0){for(var t=0;t<e.length;t++)if(e[t].uid===O.uid)return!0;return!1}return!1};return Object(a.jsx)(V,{children:Object(a.jsx)("div",{className:"newFeed",children:Object(a.jsx)("div",{className:"newFeedWrap",children:Object(a.jsxs)("div",{className:"swipeSide",children:[Object(a.jsxs)("div",{className:"storyLine",children:[Object(a.jsxs)("div",{className:"storyBox",children:[Object(a.jsx)("div",{className:"avatarWrap",children:Object(a.jsx)("img",{src:te,alt:"avatar"})}),Object(a.jsx)("div",{className:"nameWrap",children:Object(a.jsx)("p",{children:"minttran"})})]}),Object(a.jsxs)("div",{className:"storyBox",children:[Object(a.jsx)("div",{className:"avatarWrap",children:Object(a.jsx)("img",{src:te,alt:"avatar"})}),Object(a.jsx)("div",{className:"nameWrap",children:Object(a.jsx)("p",{children:"miran"})})]}),Object(a.jsxs)("div",{className:"storyBox",children:[Object(a.jsx)("div",{className:"avatarWrap",children:Object(a.jsx)("img",{src:te,alt:"avatar"})}),Object(a.jsx)("div",{className:"nameWrap",children:Object(a.jsx)("p",{children:"minttran"})})]})]}),Object(a.jsx)("div",{className:"postWrapper",children:f.map((function(t,c){return Object(a.jsxs)("div",{className:"post",children:[Object(a.jsxs)(o.c,{to:"profile/".concat(t.uid),className:"postOwner",children:[Object(a.jsx)("div",{className:"ownerImage",children:Object(a.jsx)("img",{src:null!==t.owner.avatarUrl?t.owner.avatarUrl:re,alt:"owner"})}),Object(a.jsx)("div",{className:"ownerName",children:Object(a.jsx)("p",{children:t.owner.firstName+" "+t.owner.lastName})})]}),Object(a.jsx)("div",{className:"postImage",children:Object(a.jsx)("img",{src:t.file,alt:t.status})}),Object(a.jsxs)("div",{className:"interactionBox",children:[Object(a.jsxs)("div",{className:"button",children:[x(t.interactions)?Object(a.jsx)(ce.a,{onClick:function(){return v(t.key)},className:"icon"}):Object(a.jsx)(ce.g,{onClick:function(){return v(t.key)},className:"icon"}),Object(a.jsx)(ne.b,{className:"icon"}),Object(a.jsx)(ce.m,{className:"icon"})]}),Object(a.jsx)("div",{className:"save",children:Object(a.jsx)(le.a,{className:"icon"})})]}),Object(a.jsx)("div",{className:"likedBy",children:Object(a.jsxs)("p",{children:["Liked by ",t.interactions.length," peoples"]})}),Object(a.jsx)("div",{className:"postContent",children:Object(a.jsxs)("div",{className:"ownerName",children:[Object(a.jsx)("span",{className:"name",children:t.owner.firstName+" "+t.owner.lastName}),Object(a.jsx)("span",{className:"content",children:t.status})]})}),Object(a.jsx)("div",{className:"viewAllComment",children:t.comments.length>2?Object(a.jsxs)("p",{children:["View All ",t.comments.length," Comments"]}):Object(a.jsx)(a.Fragment,{})}),Object(a.jsx)("div",{className:"commentBox",children:t.comments.slice(0,2).map((function(e,t){return Object(a.jsxs)("div",{className:"comment",children:[Object(a.jsx)("span",{className:"name",children:e.sender.firstName+" "+e.sender.lastName}),Object(a.jsx)("span",{className:"conent",children:e.content})]},t)}))}),Object(a.jsx)("div",{className:"createdAt",children:Object(a.jsxs)("p",{children:[Oe()(t.createdAt.toDate()).fromNow(!0)," ago"]})}),Object(a.jsx)(he,{onChange:function(e){return i(e)},style:{paddingLeft:10,paddingRight:10},type:"submit",value:r,handleFunction:function(c){return function(t,c){t.preventDefault(),""!==r&&(e(M({pid:c,uid:O.uid,content:r})),i(""))}(c,t.key)}})]},c)}))})]})})})})},ve=c(162);function xe(e){var t=e.component,c=Object(ve.a)(e,["component"]);return Object(a.jsx)(l.b,Object(d.a)(Object(d.a)({},c),{},{component:function(e){var c=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null;return c&&c.auth?Object(a.jsx)(t,Object(d.a)({},e)):Object(a.jsx)(l.a,{to:"/login"})}}))}var Ne=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.auth}));Object(n.useMemo)((function(){return t.uid}),[t.uid]),s.a.useEffect((function(){t.authenticated||e(D())}),[]);var c=[{path:"/realtime-chat-application",name:"Home",component:ie},{path:"/login",name:"Login",component:ee},{path:"/signup",name:"Sign Up",component:$},{path:"/newfeed",name:"New Feed",component:fe},{path:"/profile/:uid",name:"Profile",component:me}];return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(o.a,{children:c.map((function(e){return Object(a.jsx)("div",{children:"Login"===e.name||"Sign Up"===e.name?Object(a.jsx)(l.b,{path:e.path,component:e.component,exact:!0}):Object(a.jsx)(xe,{path:e.path,component:e.component})},e.name)}))})})},ye=c(38),ge={firstName:"",lastName:"",uid:"",email:"",avatarUrl:"",authenticating:!1,authenticated:!1,error:null,notify:"",updating:!1},Se={users:[],conversations:[],loadingUser:!0,loadingChat:!0,lastestDoc:{},loadingUserByKey:!1,userByKey:{posts:[]},error:"",notify:"",updating:!1},Ee={posts:[],posting:!0,loadingPosts:!0,error:null,posted:!1,postByKey:{item:{},comments:[],loading:!0,error:null}},_e={interactions:[],isLoading:!1,error:null,notify:null},we=Object(ye.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat(f,"_REQUEST"):return e=Object(d.a)(Object(d.a)({},e),{},{authenticating:!0});case"".concat(f,"_SUCCESS"):return e=Object(d.a)(Object(d.a)({},e),{},{firstName:t.payload.user.firstName,lastName:t.payload.user.lastName,uid:t.payload.user.uid,email:t.payload.user.email,avatarUrl:t.payload.user.avatarUrl,authenticated:!0,authenticating:!1,error:null});case"".concat(f,"_FAILURE"):return e=Object(d.a)(Object(d.a)({},e),{},{authenticated:!1,authenticating:!1,error:t.payload.error});case"".concat(v,"_REQUEST"):return e;case"".concat(v,"_SUCCESS"):return e=Object(d.a)({},ge);case"".concat(v,"_FAILURE"):return e=Object(d.a)(Object(d.a)({},e),{},{error:t.payload.error});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat(N,"_REQUEST"):return e=Object(d.a)(Object(d.a)({},e),{},{loadingUser:!0});case"".concat(N,"_SUCCESS"):return e=Object(d.a)(Object(d.a)({},e),{},{loadingUser:!1,users:t.payload.users});case"".concat(g,"_REQUEST"):return e=Object(d.a)(Object(d.a)({},e),{},{loadingChat:!0});case"".concat(g,"_SUCCESS"):return e=Object(d.a)(Object(d.a)({},e),{},{loadingChat:!1,conversations:t.payload.conversations,lastestDoc:t.payload.lastDoc});case"".concat(E,"_REQUEST"):return e=Object(d.a)(Object(d.a)({},e),{},{loadingChat:!0});case"".concat(E,"_SUCCESS"):return e=Object(d.a)(Object(d.a)({},e),{},{loadingChat:!1,conversations:[].concat(Object(oe.a)(t.payload.conversations),Object(oe.a)(e.conversations)),lastestDoc:t.payload.lastestDoc});case"".concat(E,"_FAILURE"):return e=Object(d.a)({},e);case"".concat(_,"_REQUEST"):return e=Object(d.a)(Object(d.a)({},e),{},{loadingUserByKey:!0});case"".concat(_,"_SUCCESS"):return e=Object(d.a)(Object(d.a)({},e),{},{loadingUserByKey:!1,userByKey:t.payload.userByKey});case"".concat(_,"_FAILURE"):return e=Object(d.a)(Object(d.a)({},e),{},{error:t.payload.error});case"".concat(x,"_REQUEST"):return e=Object(d.a)(Object(d.a)({},e),{},{updating:!0});case"".concat(x,"_SUCCESS"):return e=Object(d.a)(Object(d.a)({},e),{},{updating:!1,notify:t.payload.notify,userByKey:Object(d.a)(Object(d.a)({},e.userByKey),{},{avatarUrl:t.payload.avatarUrl})});default:return e}},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat(w,"_REQUEST"):return e=Object(d.a)({},e);case"".concat(w,"_SUCCESS"):return e=Object(d.a)(Object(d.a)({},e),{},{posting:!1,posted:!0});case"".concat(w,"_FAILURE"):e=Object(d.a)(Object(d.a)({},e),{},{posted:!1,posting:!1,error:t.payload.error});case"".concat(U,"_REQUEST"):return e=Object(d.a)({},e);case"".concat(U,"_SUCCESS"):return e=Object(d.a)(Object(d.a)({},e),{},{loadingPosts:!1,posts:t.payload.posts});case"".concat(U,"_FAILURE"):return e=Object(d.a)(Object(d.a)({},e),{},{loadingPosts:!1,error:t.payload.error});case"".concat(C,"_REQUEST"):return e=Object(d.a)({},e);case"".concat(C,"_SUCCESS"):return e=Object(d.a)(Object(d.a)({},e),{},{postByKey:Object(d.a)(Object(d.a)({},e.postByKey),{},{item:t.payload.postItem,comments:t.payload.comments,loading:!1,error:null})});case"".concat(C,"_FAILURE"):return e=Object(d.a)(Object(d.a)({},e),{},{postByKey:Object(d.a)(Object(d.a)({},e.postByKey),{},{loading:!0,error:t.payload.error})});case"".concat(I,"_REQUEST"):return e=Object(d.a)(Object(d.a)({},e),{},{loadingPosts:!0});case"".concat(I,"_SUCCESS"):return e=Object(d.a)(Object(d.a)({},e),{},{loadingPosts:!1,posts:t.payload.posts,error:""});case"".concat(I,"_FAILURE"):e=Object(d.a)(Object(d.a)({},e),{},{loadingPosts:!1,error:t.payload.error});default:return e}},interaction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat(A,"_REQUEST"):return e;case"".concat(L,"_REQUEST"):return e=Object(d.a)(Object(d.a)({},e),{},{isLoading:!0});case"".concat(L,"_SUCCESS"):return e=Object(d.a)(Object(d.a)({},e),{},{isLoading:!1,interactions:t.payload.interactions});default:return e}}}),Ue=c(161),Ce=Object(ye.d)(we,Object(ye.a)(Ue.a));window.store=Ce,i.a.render(Object(a.jsx)(b.a,{store:Ce,children:Object(a.jsx)(Ne,{})}),document.getElementById("root"))}},[[308,1,2]]]);
//# sourceMappingURL=main.f2aa1ba6.chunk.js.map