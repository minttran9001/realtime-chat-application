{"version":3,"sources":["database/firebase.js","actions/constants.js","actions/auth.js","actions/user.js","actions/post.js","actions/interaction.js","images/100ppi/Asset 2.png","components/Header/index.js","components/Layout/index.js","components/Layout/UI/Input/index.js","components/Layout/UI/Card/index.js","components/Layout/UI/Button/index.js","components/Layout/UI/Title/index.js","components/Layout/UI/Error/index.js","containers/SignUpPage/index.js","containers/LoginPage/index.js","images/noavtar.png","containers/HomePage/index.js","images/mint.jpg","components/Layout/UI/Loading/index.js","components/PostDetail/index.js","components/ModalPost/index.js","components/ModalUpdateAvatar/index.js","containers/ProfilePage/index.js","components/Layout/UI/FormChat/index.js","containers/NewFeedPage/index.js","components/Private/index.js","App.js","reducers/authReducer.js","reducers/userReducer.js","reducers/postReducer.js","reducers/interactionReducer.js","reducers/index.js","store/index.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","authConstants","userConstants","postConstants","interactionConstants","jwt","require","bcrypt","config","API_KEY","signUp","user","dispatch","a","type","db","firestore","auth","salt","genSaltSync","hash","hashSync","password","createUserWithEmailAndPassword","email","then","data","currentUser","name","firstName","lastName","updateProfile","displayName","collection","doc","uid","set","createdAt","Date","isOnline","loggedUser","token","sign","avatarUrl","expiresIn","localStorage","setItem","JSON","stringify","payload","catch","err","error","message","updateMessage","msgObj","add","isView","ref","storage","file","metaData","contentType","child","put","snapshot","getDownloadURL","url","user_uid_1","user_uid_2","getRealTimeConversations","uid_1","uid_2","orderBy","where","get","lastestDoc","docs","length","onSnapshot","querySnapshot","conversations","forEach","push","reverse","pushPostComment","comment","commentRef","postRef","liked","pid","update","commentCount","FieldValue","increment","isEmpty","obj","prop","hasOwnProperty","updateLike","interaction","limit","newObj","key","id","likeCount","delete","Header","useSelector","state","useDispatch","className","to","src","Logo","alt","onClick","document","querySelector","classList","remove","authenticated","pathname","signOut","clear","Layout","props","children","Input","value","label","onChange","placeholder","useState","inputGroup","setInputGroup","onFocus","e","target","Card","Button","Title","Error","SignUp","form","setForm","handleSignUp","preventDefault","onSubmit","Login","snap","result","exists","compare","res","signInWithEmailAndPassword","split","photoURL","stringArray","i","Home","isSelected","setIsSelected","userSelected","setUserSelected","setMessage","messageImg","setMessageImg","menuSelected","setMenuSelected","users","loadingUser","loadingChat","viewUser","undefined","useEffect","container","getElementById","window","addEventListener","innerWidth","style","transform","chatArea","scrollTop","scrollHeight","img","viewFile","messImgElement","URL","createObjectURL","files","submitMessage","handleSeen","setSeenMessage","map","item","index","initChat","querySelectorAll","selectItem","noavt","stopPropagation","handleOpenFriendBox","myTarget","handleCloseFriendBox","onScroll","body","clientHeight","click","Loading","PostDetail","React","replySelected","setReplySelected","commentValue","setCommentValue","post","auth_uid","useMemo","interactionArr","interactions","postByKey","loading","comments","handleLikePost","replies","owner","status","sender","content","newArr","closeReplyComment","openReplyComment","Mint","arr","console","log","isInArray","toDate","toDateString","ModalPost","postImage","setPostImage","filePost","postImageElement","imageBox","postText","pushPost","ModalUpdateAvatar","temp","setTemp","closeModalPost","modal","fileInput","useRef","imgSrc","viewPhoto","el","task","userLocal","getItem","parse","notify","ProfilePage","userByKey","uidParam","match","params","userRef","posts","getUserById","openPostDetail","ownerId","postItem","commentSnapShot","commentItem","getPostByKey","loadingUserByKey","FormChat","handleFunction","onChangeValue","NewFeedPage","setComment","interactionRef","count","cmt","uSnap","inter","handleUpdateLike","testImg","slice","commentIndex","moment","fromNow","paddingLeft","paddingRight","handlePushComment","PrivateRoute","Component","component","rest","App","verify","decode","routes","path","NewFeed","Profile","route","exact","initialState","authenticating","updating","posting","loadingPosts","posted","isLoading","myReducers","combineReducers","action","lastDoc","store","createStore","rootReducers","applyMiddleware","thunk","ReactDOM","render"],"mappings":"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","file":"static/js/main.7239cecc.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/storage\";\r\nvar firebaseConfig = {\r\n  apiKey: \"AIzaSyDhWHYUo31EhafDtO8OdAlDZthmVN85TPI\",\r\n  authDomain: \"realtime-chat-ap.firebaseapp.com\",\r\n  projectId: \"realtime-chat-ap\",\r\n  storageBucket: \"realtime-chat-ap.appspot.com\",\r\n  messagingSenderId: \"930254441751\",\r\n  appId: \"1:930254441751:web:c256a9a83d26e7af4d7b52\",\r\n  measurementId: \"G-8Q95J2GC5R\",\r\n};\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\nexport default firebase;\r\n","export const authConstants = {\r\n    USER_LOGIN : 'USER_LOGIN',\r\n    USER_LOGOUT : 'USER_LOGOUT',\r\n}\r\n\r\nexport const userConstants = {\r\n    UPDATE_USER_AVATAR : 'UPDATE_USER_AVATAR',\r\n    GET_REALTIME_USERS : 'GET_REALTIME_USERS',\r\n    UPDATE_MESSAGE : 'UPDATE_MESSAGE',\r\n    GET_REALTIME_MESSAGE : 'GET_REALTIME_MESSAGE',\r\n    SET_SEEN_MESSAGE : 'SET_SEEN_MESSAGE',\r\n    GET_LOADMORE_MESSAGE : 'GET_LOADMORE_MESSAGE',\r\n    GET_USER_PROFILE_BY_ID : 'GET_USER_PROFILE_BY_ID'\r\n\r\n}\r\nexport const postConstants = {\r\n    PUSH_POST : 'PUSH_POST',\r\n    GET_REALTIME_POSTS : 'GET_REALTIME_POSTS',\r\n    GET_POST_BY_KEY:'GET_POST_BY_KEY',\r\n    CLEAR_POST_ITEM :'CLEAR_POST_ITEM',\r\n    PUSH_COMMENT : 'PUSH_COMMENT',\r\n    GET_REALTIME_POSTS_NEW_FEED : 'GET_REALTIME_POSTS_NEW_FEED'\r\n}\r\n\r\nexport const interactionConstants = {\r\n    GET_REALTIME_INTERACTIONS : 'GET_REALTIME_INTERACTIONS',\r\n    UPDATE_LIKE : 'UPDATE_LIKES',\r\n}","import firebase from \"../database/firebase\";\r\nimport { authConstants } from \"./constants\";\r\nconst jwt = require(\"jsonwebtoken\");\r\nconst bcrypt = require(\"bcryptjs\");\r\n\r\nrequire(\"dotenv\").config();\r\nconst API_KEY = \"123123123ASACI9Z999CCAA911S12\";\r\n\r\nexport const signUp = (user) => {\r\n  return async (dispatch) => {\r\n    dispatch({\r\n      type: `${authConstants.USER_LOGIN}_REQUEST`,\r\n    });\r\n    const db = firebase.firestore();\r\n    const auth = firebase.auth();\r\n    const salt = bcrypt.genSaltSync(10);\r\n    const hash = bcrypt.hashSync(user.password, salt);\r\n    auth\r\n      .createUserWithEmailAndPassword(user.email, user.password)\r\n      .then((data) => {\r\n        const currentUser = firebase.auth().currentUser;\r\n        const name = `${user.firstName} ${user.lastName}`;\r\n        currentUser\r\n          .updateProfile({\r\n            displayName: name,\r\n          })\r\n          .then(() => {\r\n            db.collection(\"users\")\r\n              .doc(data.user.uid)\r\n              .set({\r\n                firstName: user.firstName,\r\n                lastName: user.lastName,\r\n                createdAt: new Date(),\r\n                uid: data.user.uid,\r\n                isOnline: true,\r\n                email: user.email,\r\n                password: hash,\r\n              })\r\n              .then(() => {\r\n                const token = jwt.sign(\r\n                  {\r\n                    firstName: user.firstName,\r\n                    lastName: user.lastName,\r\n                    uid: data.user.uid,\r\n                    email: user.email,\r\n                    avatarUrl: user.avatarUrl,\r\n                  },\r\n                  API_KEY,\r\n                  {\r\n                    expiresIn: 3000,\r\n                  }\r\n                );\r\n\r\n                const loggedUser = {\r\n                  auth: true,\r\n                  token: token,\r\n                };\r\n                localStorage.setItem(\"user\", JSON.stringify(loggedUser));\r\n                dispatch({\r\n                  type: `${authConstants.USER_LOGIN}_SUCCESS`,\r\n                  payload: {\r\n                    user: {\r\n                      avatarUrl : user.avatarUrl,\r\n                      firstName: user.firstName,\r\n                      lastName: user.lastName,\r\n                      uid: data.user.uid,\r\n                      email: user.email,\r\n                    },\r\n                  },\r\n                });\r\n              })\r\n              .catch((err) => {\r\n                dispatch({\r\n                  type: `${authConstants.USER_LOGIN}_FAILURE`,\r\n                  payload: err,\r\n                });\r\n              });\r\n          });\r\n      })\r\n      .catch((error) => {\r\n        dispatch({\r\n          type: `${authConstants.USER_LOGIN}_FAILURE`,\r\n          payload: { error: error.message },\r\n        });\r\n      });\r\n  };\r\n};\r\n\r\nexport const signIn = (user) => {\r\n  return async (dispatch) => {\r\n    dispatch({\r\n      type: `${authConstants.USER_LOGIN}_REQUEST`,\r\n    });\r\n    const db = firebase.firestore();\r\n    const auth = firebase.auth();\r\n    const userRef = db.collection(\"users\");\r\n    userRef\r\n      .where(\"email\", \"==\", user.email)\r\n      .get()\r\n      .then((snap) => {\r\n        snap.forEach((result) => {\r\n          if (result.exists) {\r\n            bcrypt.compare(\r\n              user.password,\r\n              result.data().password,\r\n              (err, res) => {\r\n                if (res) {\r\n                  auth\r\n                    .signInWithEmailAndPassword(user.email, user.password)\r\n                    .then((data) => {\r\n                      db.collection(\"users\")\r\n                        .doc(data.user.uid)\r\n                        .update({\r\n                          isOnline: true,\r\n                        })\r\n                        .then(() => {\r\n                          const name = data.user.displayName.split(\" \");\r\n                          const avatarUrl = data.user.photoURL;\r\n                          const stringArray = [];\r\n                          for (let i = 0; i < name.length; i++) {\r\n                            stringArray.push(name[i]);\r\n                          }\r\n                          const firstName = name[0];\r\n                          const lastName = name[1];\r\n                          const token = jwt.sign(\r\n                            {\r\n                              avatarUrl,\r\n                              firstName: firstName,\r\n                              lastName: lastName,\r\n                              uid: data.user.uid,\r\n                              email: user.email,\r\n                            },\r\n                            API_KEY,\r\n                            {\r\n                              expiresIn: 3000,\r\n                            }\r\n                          );\r\n                          const loggedUser = {\r\n                            auth: true,\r\n                            token: token,\r\n                          };\r\n                          localStorage.setItem(\r\n                            \"user\",\r\n                            JSON.stringify(loggedUser)\r\n                          );\r\n                          dispatch({\r\n                            type: `${authConstants.USER_LOGIN}_SUCCESS`,\r\n                            payload: {\r\n                              user: {\r\n                                avatarUrl,\r\n                                firstName: firstName,\r\n                                lastName: lastName,\r\n                                uid: data.user.uid,\r\n                                email: user.email,\r\n                              },\r\n                            },\r\n                          });\r\n                        });\r\n                    });\r\n                } else {\r\n                  dispatch({\r\n                    type: `${authConstants.USER_LOGIN}_FAILURE`,\r\n                    payload: { error: \"User or password was wrong\" },\r\n                  });\r\n                }\r\n              }\r\n            );\r\n          } else {\r\n            dispatch({\r\n              type: `${authConstants.USER_LOGIN}_FAILURE`,\r\n              payload: { error: \"User doesn't exists\" },\r\n            });\r\n          }\r\n        });\r\n      });\r\n  };\r\n};\r\n\r\nexport const isLoggedInUser = () => {\r\n  return async (dispatch) => {\r\n    const user = localStorage.getItem(\"user\")\r\n      ? JSON.parse(localStorage.getItem(\"user\"))\r\n      : null;\r\n    if (user) {\r\n      const token = user.token;\r\n      if (!token) {\r\n        localStorage.clear();\r\n        dispatch({\r\n          type: `${authConstants.USER_LOGIN}_FAILURE`,\r\n          payload: { error: \"No token\" },\r\n        });\r\n      } else {\r\n        jwt.verify(token, API_KEY, (err, decode) => {\r\n          if (err) {\r\n                localStorage.clear();\r\n                dispatch({\r\n                  type: `${authConstants.USER_LOGIN}_FAILURE`,\r\n                  payload: {\r\n                    error: \"You have no permission. Please log in again\",\r\n                  },\r\n                });\r\n          } else {\r\n            firebase\r\n              .firestore()\r\n              .collection(\"users\")\r\n              .doc(decode.uid)\r\n              .update({\r\n                isOnline: true,\r\n              })\r\n              .then(() => {\r\n                dispatch({\r\n                  type: `${authConstants.USER_LOGIN}_SUCCESS`,\r\n                  payload: { user: decode },\r\n                });\r\n              });\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      localStorage.clear();\r\n\r\n      dispatch({\r\n        type: `${authConstants.USER_LOGIN}_FAILURE`,\r\n        payload: { error: \"Login again\" },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const logout = (uid) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: `${authConstants.USER_LOGOUT}_REQUEST` });\r\n    const db = firebase.firestore();\r\n    db.collection(\"users\")\r\n      .doc(uid)\r\n      .update({\r\n        isOnline: false,\r\n      })\r\n      .then(() => {\r\n        firebase\r\n          .auth()\r\n          .signOut()\r\n          .then(() => {\r\n            localStorage.clear();\r\n            dispatch({ type: `${authConstants.USER_LOGOUT}_SUCCESS` });\r\n          })\r\n          .catch((err) => {\r\n            dispatch({\r\n              type: `${authConstants.USER_LOGOUT}_FAILURE`,\r\n              payload: { error: err },\r\n            });\r\n          });\r\n      });\r\n  };\r\n};\r\n","import { userConstants } from \"./constants\";\r\nimport firebase from \"../database/firebase\";\r\nexport const getRealTimeUser = (uid) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: `${userConstants.GET_REALTIME_USERS}_REQUEST` });\r\n    const db = firebase.firestore();\r\n    if (uid !== undefined) {\r\n      db.collection(\"users\")\r\n        .where(\"uid\", \"!=\", uid)\r\n        .onSnapshot(function (snap) {\r\n          const users = [];\r\n          snap.forEach((doc) => {\r\n            if (doc.data().length !== users.length) {\r\n              users.push({key : doc.id,...doc.data()});\r\n            }\r\n          });\r\n          dispatch({\r\n            type: `${userConstants.GET_REALTIME_USERS}_SUCCESS`,\r\n            payload: { users },\r\n          });\r\n        });\r\n    }\r\n  };\r\n};\r\nexport const updateMessage = ({ msgObj, type }) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: `${userConstants.UPDATE_MESSAGE}_REQUEST` });\r\n    const db = firebase.firestore();\r\n    if (type !== \"file\") {\r\n      db.collection(\"conversations\")\r\n        .add({\r\n          ...msgObj,\r\n          type: \"text\",\r\n          isView: false,\r\n          createdAt: new Date(),\r\n        })\r\n        .then((data) => {\r\n          dispatch({ type: `${userConstants.UPDATE_MESSAGE}_SUCCESS` });\r\n        })\r\n        .catch((error) => {\r\n          dispatch({\r\n            type: `${userConstants.UPDATE_MESSAGE}_REQUEST`,\r\n            payload: { error: error.message },\r\n          });\r\n        });\r\n    } else {\r\n      const ref = firebase.storage().ref();\r\n      const name = new Date() + \"-\" + msgObj.file.name;\r\n      const metaData = {\r\n        contentType: msgObj.file.type,\r\n      };\r\n      const task = ref.child(name).put(msgObj.file, metaData);\r\n      task.then((snapshot) => {\r\n        snapshot.ref.getDownloadURL().then((url) => {\r\n          db.collection(\"conversations\")\r\n            .add({\r\n              user_uid_1: msgObj.user_uid_1,\r\n              user_uid_2: msgObj.user_uid_2,\r\n              file: url,\r\n              type: \"file\",\r\n              isView: false,\r\n              createdAt: new Date(),\r\n            })\r\n            .then((data) => {\r\n              dispatch({ type: `${userConstants.UPDATE_MESSAGE}_SUCCESS` });\r\n            })\r\n            .catch((error) => {\r\n              dispatch({\r\n                type: `${userConstants.UPDATE_MESSAGE}_REQUEST`,\r\n                payload: { error: error.message },\r\n              });\r\n            });\r\n        });\r\n      });\r\n    }\r\n  };\r\n};\r\nexport const setSeenMessage = ({ uid_1, uid_2 }) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: `${userConstants.SET_SEEN_MESSAGE}_REQUEST` });\r\n    const db = firebase.firestore();\r\n    db.collection(\"conversations\")\r\n      .where(\"user_uid_1\", \"==\", uid_2)\r\n      .where(\"user_uid_2\", \"==\", uid_1)\r\n      .orderBy(\"createdAt\", \"desc\")\r\n      .onSnapshot((querySnapshot) => {\r\n        querySnapshot.forEach((doc) => {\r\n          doc.ref.update({\r\n            isView: true,\r\n          });\r\n        });\r\n      });\r\n  };\r\n};\r\nexport const getUserById = ({ uid }) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: `${userConstants.GET_USER_PROFILE_BY_ID}_REQUEST` });\r\n    const db = firebase.firestore();\r\n    const userRef = db.collection(\"users\");\r\n    const postRef = db.collection(\"posts\");\r\n    \r\n    postRef.where(\"uid\", \"==\", uid).onSnapshot(async (snapshot) => {\r\n      const posts = [];\r\n      snapshot.forEach((doc) => {\r\n        posts.push({ key: doc.id, ...doc.data() });\r\n      });\r\n      const userByKey = (await userRef.doc(uid).get()).data();\r\n      dispatch({\r\n        type: `${userConstants.GET_USER_PROFILE_BY_ID}_SUCCESS`,\r\n        payload: { userByKey: { ...userByKey, posts: posts } },\r\n      });\r\n    });\r\n  };\r\n};\r\nexport const updateUserAvatar = (uid, file) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: `${userConstants.UPDATE_USER_AVATAR}_REQUEST` });\r\n    const db = firebase.firestore();\r\n    const ref = firebase.storage().ref();\r\n    const name = new Date() + \"-\" + file.name;\r\n    const metaData = file.type;\r\n    const task = ref.child(name).put(file, metaData);\r\n    var userLocal = localStorage.getItem(\"user\")\r\n      ? JSON.parse(localStorage.getItem(\"user\"))\r\n      : null;\r\n    task.then((snapshot) => {\r\n      snapshot.ref\r\n        .getDownloadURL()\r\n        .then((url) => {\r\n          const user = firebase.auth().currentUser;\r\n          user.updateProfile({\r\n            photoURL: url,\r\n          });\r\n          db.collection(\"users\").doc(uid).update({\r\n            avatarUrl: url,\r\n          });\r\n\r\n          userLocal = {\r\n            ...userLocal.user,\r\n            avatarUrl: url,\r\n          };\r\n        })\r\n\r\n        .then(() => {\r\n          dispatch({\r\n            type: `${userConstants.UPDATE_USER_AVATAR}_SUCCESS`,\r\n            payload: {\r\n              notify: \"Update successfully\",\r\n              avatarUrl: userLocal.avatarUrl,\r\n            },\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          dispatch({\r\n            type: `${userConstants.UPDATE_USER_AVATAR}_FALURE`,\r\n            payload: { error: err },\r\n          });\r\n        });\r\n    });\r\n  };\r\n};\r\n\r\nexport const getLoadMoreConversations = ({ uid_1, uid_2, lastestDoc }) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: `${userConstants.GET_LOADMORE_MESSAGE}_REQUEST` });\r\n    const db = firebase.firestore();\r\n\r\n    const ref = db\r\n      .collection(\"conversations\")\r\n      .orderBy(\"createdAt\", \"desc\")\r\n      .where(\"user_uid_1\", \"in\", [uid_2, uid_1])\r\n      .startAfter(lastestDoc || 0)\r\n      .limit(10);\r\n    const data = await ref.get();\r\n    lastestDoc = data.docs[data.docs.length - 1];\r\n    const conversations = [];\r\n    data.docs.forEach((doc) => {\r\n      conversations.push(doc.data());\r\n    });\r\n    if (conversations !== []) {\r\n      dispatch({\r\n        type: `${userConstants.GET_LOADMORE_MESSAGE}_SUCCESS`,\r\n        payload: { conversations: conversations.reverse(), lastestDoc },\r\n      });\r\n    } else {\r\n      dispatch({\r\n        type: `${userConstants.GET_LOADMORE_MESSAGE}_FAILURE`,\r\n        payload: { error: \"END\" },\r\n      });\r\n    }\r\n  };\r\n};\r\nexport const getRealTimeConversations = ({ uid_1, uid_2, type }) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: `${userConstants.GET_REALTIME_MESSAGE}_REQUEST` });\r\n    const db = firebase.firestore();\r\n    const ref = db\r\n      .collection(\"conversations\")\r\n      .orderBy(\"createdAt\", \"desc\")\r\n      .where(\"user_uid_1\", \"in\", [uid_2, uid_1]);\r\n    const data = await ref.get();\r\n    const lastestDoc = data.docs[data.docs.length - 1];\r\n    db.collection(\"conversations\")\r\n      .orderBy(\"createdAt\", \"desc\")\r\n      .where(\"user_uid_1\", \"in\", [uid_1, uid_2])\r\n      .onSnapshot((querySnapshot) => {\r\n        const conversations = [];\r\n        querySnapshot.forEach((doc) => {\r\n          if (\r\n            (doc.data().user_uid_1 === uid_1 &&\r\n              doc.data().user_uid_2 === uid_2) ||\r\n            (doc.data().user_uid_1 === uid_2 && doc.data().user_uid_2 === uid_1)\r\n          ) {\r\n            conversations.push(doc.data());\r\n          }\r\n        });\r\n        dispatch({\r\n          type: `${userConstants.GET_REALTIME_MESSAGE}_SUCCESS`,\r\n          payload: { conversations: conversations.reverse(), lastestDoc },\r\n        });\r\n      });\r\n  };\r\n};\r\n","import { postConstants } from \"./constants\";\r\nimport firebase from \"../database/firebase\";\r\nexport const pushPost = (post) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: `${postConstants.PUSH_POST}_REQUEST` });\r\n    const db = firebase.firestore();\r\n    const ref = firebase.storage().ref();\r\n    const name = new Date() + \"-\" + post.file.name;\r\n    const metaData = {\r\n      contentType: post.file.type,\r\n    };\r\n    const task = ref.child(name).put(post.file, metaData);\r\n    task.then((snapshot) => {\r\n      snapshot.ref.getDownloadURL().then((url) => {\r\n        db.collection(\"posts\")\r\n          .add({\r\n            file: url,\r\n            createdAt: new Date(),\r\n            status: post.status,\r\n            uid: post.uid,\r\n            likeCount: 0,\r\n            commentCount: 0,\r\n          })\r\n          .then(() => {\r\n            dispatch({ type: `${postConstants.PUSH_POST}_SUCCESS` });\r\n          })\r\n          .catch((err) => {\r\n            dispatch({\r\n              type: `${postConstants.PUSH_POST}_FAILURE`,\r\n              payload: { error: err },\r\n            });\r\n          });\r\n      });\r\n    });\r\n  };\r\n};\r\n\r\nexport const getPostByKey = (key, ownerId) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: `${postConstants.GET_POST_BY_KEY}_REQUEST` });\r\n    const db = firebase.firestore();\r\n    const postRef = db.collection(`posts`);\r\n    const userRef = db.collection(\"users\");\r\n    const commentRef = db.collection(\"comments\");\r\n\r\n    postRef.get().then((snapshot) => {\r\n      let postItem = {};\r\n      commentRef\r\n        .orderBy(\"createdAt\", \"desc\")\r\n        .where(\"pid\", \"==\", key)\r\n        .onSnapshot(async (commentSnapShot) => {\r\n          const comments = [];\r\n          commentSnapShot.forEach((commentItem) => {\r\n            userRef\r\n              .where(\"uid\", \"==\", commentItem.data().uid)\r\n              .onSnapshot((snap) => {\r\n                snap.forEach((doc) => {\r\n                  comments.push({ sender: doc.data(), ...commentItem.data() });\r\n                });\r\n              });\r\n          });\r\n          const owner = await userRef.doc(ownerId).get();\r\n\r\n          snapshot.forEach((doc) => {\r\n            if (doc.id === key) {\r\n              postItem = { key: doc.id, ...doc.data(), owner: owner.data() };\r\n            }\r\n          });\r\n\r\n          if (postItem !== {}) {\r\n            dispatch({\r\n              type: `${postConstants.GET_POST_BY_KEY}_SUCCESS`,\r\n              payload: { postItem, comments },\r\n            });\r\n          } else {\r\n            dispatch({\r\n              type: `${postConstants.GET_POST_BY_KEY}_FAILURE`,\r\n              payload: { error: `Item with key ${key} does not exist` },\r\n            });\r\n          }\r\n        });\r\n    });\r\n  };\r\n};\r\nexport const getRealTimePosts = (uid) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: `${postConstants.GET_REALTIME_POSTS}_REQUEST` });\r\n    const db = firebase.firestore();\r\n    db.collection(\"posts\")\r\n      .where(\"uid\", \"==\", uid)\r\n      .orderBy(\"createdAt\", \"desc\")\r\n      .onSnapshot((snapshot) => {\r\n        const posts = [];\r\n        snapshot.forEach((doc) => {\r\n          db.collection(\"interactions\")\r\n            .where(\"pid\", \"==\", doc.id)\r\n            .onSnapshot((query) => {\r\n              query.forEach((dc) => {\r\n                // interactions.push(dc.data());\r\n              });\r\n              posts.push({\r\n                key: doc.id,\r\n                ...doc.data(),\r\n              });\r\n              dispatch({\r\n                type: `${postConstants.GET_REALTIME_POSTS}_SUCCESS`,\r\n                payload: { posts: posts },\r\n              });\r\n            });\r\n        });\r\n      });\r\n  };\r\n};\r\nexport const getRealTimePostsNewFeed = () => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: `${postConstants.GET_REALTIME_POSTS_NEW_FEED}_REQUEST` });\r\n    const db = firebase.firestore();\r\n    const userRef = db.collection(\"users\");\r\n    const postRef = db.collection(\"posts\");\r\n    const commentRef = db.collection(\"comments\");\r\n    const interactionRef = db.collection(\"interactions\")\r\n    postRef.onSnapshot(async (snapshot) => {\r\n      const posts = [];\r\n      snapshot.forEach((post) => {\r\n        posts.push({ key: post.id, comments : [],interactions:[],...post.data() });\r\n      });\r\n      let count = 0;\r\n      for (let i = 0; i < posts.length; i++) {\r\n        const owner = userRef.doc(posts[i].uid).get();\r\n        \r\n        commentRef.where(\"pid\", \"==\", posts[i].key).onSnapshot((snap) => {\r\n\r\n          snap.forEach((cmt) => {\r\n            userRef.where(\"uid\", \"==\", cmt.data().uid).onSnapshot((uSnap) => {\r\n              uSnap.forEach((sender) => {\r\n                posts[i].comments.push({ ...cmt.data(), sender: sender.data() });\r\n              });\r\n            });\r\n          });\r\n        });\r\n        interactionRef.where(\"pid\",\"==\",posts[i].key).onSnapshot((snap)=>{\r\n          snap.forEach((inter)=>{\r\n            userRef.where(\"uid\", \"==\", inter.data().uid).onSnapshot((uSnap) => {\r\n              uSnap.forEach((sender) => {\r\n                posts[i].interactions.push({ ...inter.data(), sender: sender.data() });\r\n              });\r\n            });\r\n          })\r\n          \r\n        })\r\n        posts[i].owner = (await owner).data();\r\n        if (count === posts.length -1 ) {\r\n            dispatch({\r\n              type: `${postConstants.GET_REALTIME_POSTS_NEW_FEED}_SUCCESS`,\r\n              payload: { posts: [...posts] },\r\n            });\r\n        }\r\n        count += 1;\r\n      }\r\n    });\r\n  };\r\n};\r\nexport const pushPostComment = (comment) => {\r\n  return async (dispatch) => {\r\n    debugger;\r\n    dispatch({ type: `${postConstants.PUSH_COMMENT}_REQUEST` });\r\n    const db = firebase.firestore();\r\n    const commentRef = db.collection(\"comments\");\r\n    const postRef = db.collection(\"posts\");\r\n    commentRef\r\n      .add({\r\n        ...comment,\r\n        createdAt: new Date(),\r\n        liked: 0,\r\n      })\r\n      .then(() => {\r\n        postRef.doc(comment.pid).update({\r\n          commentCount: firebase.firestore.FieldValue.increment(1),\r\n        });\r\n        dispatch({ type: `${postConstants.PUSH_COMMENT}_SUCCESS` });\r\n      })\r\n      .catch({ type: `${postConstants.PUSH_COMMENT}_FAILURE` });\r\n  };\r\n};\r\n","import firebase from \"../database/firebase\";\r\nimport { interactionConstants } from \"./constants\";\r\nfunction isEmpty(obj) {\r\n  for (var prop in obj) {\r\n    if (obj.hasOwnProperty(prop)) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n}\r\nexport const updateLike = (interaction) => {\r\n  return async (dispatch) => {\r\n    const db = firebase.firestore();\r\n    const postRef = db.collection('posts')\r\n    db.collection(\"interactions\")\r\n      .where(\"uid\", \"==\", interaction.uid)\r\n      .where(\"pid\", \"==\", interaction.pid)\r\n      .limit(1)\r\n      .get()\r\n      .then((snapshot) => {\r\n        let newObj = {};\r\n        snapshot.forEach((doc) => {\r\n          newObj = {\r\n            key: doc.id,\r\n            ...doc.data(),\r\n          };\r\n        });\r\n\r\n        const empty = isEmpty(newObj);\r\n        if (empty) {\r\n          dispatch({ type: `${interactionConstants.UPDATE_LIKE}_REQUEST` });\r\n          db.collection(\"interactions\")\r\n            .add({\r\n              ...interaction,\r\n              createdAt: new Date(),\r\n            })\r\n            .then(() => {\r\n              postRef.doc(interaction.pid).update({\r\n                likeCount: firebase.firestore.FieldValue.increment(1)\r\n            });\r\n              dispatch({\r\n                type: `${interactionConstants.UPDATE_LIKE}_SUCCESS`,\r\n              });\r\n            })\r\n            .catch((error) => {\r\n              dispatch({\r\n                type: `${interactionConstants.UPDATE_LIKE}_FAILURE`,\r\n                payload: { error },\r\n              });\r\n            });\r\n        } else {\r\n          dispatch({ type: `${interactionConstants.UPDATE_LIKE}_REQUEST` });\r\n          db.collection(\"interactions\")\r\n            .doc(newObj.key)\r\n            .delete()\r\n            .then(() => {\r\n              postRef.doc(interaction.pid).update({\r\n                likeCount: firebase.firestore.FieldValue.increment(-1)\r\n            });\r\n              dispatch({\r\n                type: `${interactionConstants.UPDATE_LIKE}_SUCCESS`,\r\n              });\r\n            })\r\n            .catch((error) => {\r\n              dispatch({\r\n                type: `${interactionConstants.UPDATE_LIKE}_FAILURE`,\r\n                payload: { error },\r\n              });\r\n            });\r\n        }\r\n      });\r\n  };\r\n};\r\nexport const getRealtimeInteractions = (pid) => {\r\n  return async (dispatch) => {\r\n    if (pid != undefined) {\r\n      const db = firebase.firestore();\r\n      dispatch({\r\n        type: `${interactionConstants.GET_REALTIME_INTERACTIONS}_REQUEST`,\r\n      });\r\n      db.collection(\"interactions\")\r\n        .where(\"pid\", \"==\", pid)\r\n        .onSnapshot((snapshot) => {\r\n          const interactionArr = [];\r\n          snapshot.forEach((doc) => {\r\n            interactionArr.push(doc.data());\r\n          });\r\n          dispatch({\r\n            type: `${interactionConstants.GET_REALTIME_INTERACTIONS}_SUCCESS`,\r\n            payload: { interactions: interactionArr },\r\n          });\r\n        });\r\n    }\r\n  };\r\n};\r\n","export default __webpack_public_path__ + \"static/media/Asset 2.5384deb3.png\";","import React from \"react\";\r\nimport \"./style.scss\";\r\nimport { Link, NavLink } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { isLoggedInUser, logout } from \"../../actions\";\r\nimport Logo from \"../../images/100ppi/Asset 2.png\";\r\nimport {AiOutlineBars,AiOutlineClose} from 'react-icons/ai'\r\nexport default function Header() {\r\n  const auth = useSelector((state) => state.auth);\r\n  const dispatch = useDispatch();\r\n\r\n  const handleLogout = () => {\r\n    dispatch(logout(auth.uid));\r\n  };\r\n  const closeMenu = ()=>{\r\n    document.querySelector('.navSide').classList.remove('is-active')\r\n  }\r\n  const openMenu = ()=>{\r\n    document.querySelector('.navSide').classList.add('is-active')\r\n\r\n  }\r\n  return (\r\n    <div className=\"header\">\r\n      <div className=\"navBar\">\r\n        <NavLink to='/realtime-chat-application' className=\"logoArea\">\r\n          <img src={Logo} alt=\"logo\" />\r\n        </NavLink>\r\n        <AiOutlineBars onClick={openMenu} className='hamburger-menu'/>\r\n        <div className=\"navSide\">\r\n          <AiOutlineClose onClick={closeMenu} className='icon close-hamburger-menu'/>\r\n          {!auth.authenticated ? (\r\n            <ul className=\"navWrap\">\r\n              <li className=\"navItem\">\r\n              <NavLink to=\"/realtime-chat-application\" className=\"navLink\">\r\n                Message\r\n              </NavLink>\r\n            </li>\r\n            <li className=\"navItem\">\r\n              <NavLink to=\"/newfeed\" className=\"navLink\">\r\n                New Feed\r\n              </NavLink>\r\n            </li>\r\n              <li className=\"navItem\">\r\n                <NavLink to=\"/login\" className=\"navLink\">\r\n                  Login\r\n                </NavLink>\r\n              </li>\r\n              <li className=\"navItem\">\r\n                <NavLink to=\"/signup\" className=\"navLink\">\r\n                  Sign Up\r\n                </NavLink>\r\n              </li>\r\n            </ul>\r\n          ) : (\r\n            <ul className=\"navWrap\">\r\n              <li className=\"navItem\">\r\n              <NavLink to=\"/realtime-chat-application\" className=\"navLink\">\r\n                Message\r\n              </NavLink>\r\n            </li>\r\n            <li className=\"navItem\">\r\n              <NavLink to=\"/newfeed\" className=\"navLink\">\r\n                New Feed\r\n              </NavLink>\r\n            </li>\r\n              <li className=\"navItem\">\r\n                <NavLink\r\n                  to={{\r\n                    pathname: `/profile/${auth.uid}`,\r\n                    state: { uid: auth.uid },\r\n                  }}\r\n                  className=\"navLink\"\r\n                >\r\n                  {auth.firstName} Profile\r\n                </NavLink>\r\n              </li>\r\n              <li className=\"navItem\">\r\n                <Link to=\"#\" onClick={handleLogout} className=\"navLink\">\r\n                  Log out\r\n                </Link>\r\n              </li>\r\n            </ul>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react'\r\nimport Header from '../../components/Header/index'\r\nexport default function Layout(props) {\r\n    return (\r\n        <div className='layout'>\r\n            <Header/>\r\n            {props.children}\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\nimport './style.scss'\r\nexport default function Input({value,type,label,onChange,placeholder}) {\r\n    const [inputGroup,setInputGroup] = useState('inputGroup')\r\n    const handleChange = (e)=>{\r\n        const {value}=e.target;\r\n        onChange(value);\r\n    }\r\n    const onFocus = (e)=>{\r\n        setInputGroup('inputGroup onFocus')\r\n    }\r\n    return (\r\n        <div className={inputGroup}>\r\n            <label>{label}</label>\r\n            <input type={type} onFocus={onFocus} onChange={handleChange} placeholder={placeholder} value={value} />\r\n            <div className='line'></div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport './style.scss'\r\nexport default function Card(props) {\r\n    return (\r\n        <div className='card'>\r\n            {props.children}\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport './style.scss'\r\nexport default function Button(props) {\r\n    return (\r\n        <button type={props.type} onClick={props.onClick} className='buttonGold'>{props.children}</button>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport './style.scss'\r\nexport default function Title(props) {\r\n    return (\r\n        <div className='title'>\r\n            <p >{props.children}</p>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport './style.scss'\r\nimport {RiErrorWarningFill} from 'react-icons/ri'\r\nconst Error = (props)=>{\r\n    return(\r\n        <div className='error'>\r\n            <p>{props.children}</p>\r\n            <RiErrorWarningFill className='icon'/>\r\n        </div>\r\n    )\r\n}\r\nexport default Error","import React, { useState } from \"react\";\r\nimport Layout from \"../../components/Layout\";\r\nimport Input from \"../../components/Layout/UI/Input/index\";\r\nimport Card from \"../../components/Layout/UI/Card/index\";\r\nimport Button from \"../../components/Layout/UI/Button/index\";\r\nimport Title from \"../../components/Layout/UI/Title/index\";\r\nimport Error from '../../components/Layout/UI/Error/index'\r\nimport { signUp } from \"../../actions\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nexport default function SignUp() {\r\n  const dispatch = useDispatch();\r\n  const auth = useSelector((state) => state.auth);\r\n  const [form, setForm] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n  });\r\n  const handleSignUp = async (e) => {\r\n    e.preventDefault();\r\n    dispatch(signUp(form));\r\n  };\r\n  if (auth.authenticated === true) {\r\n    return <Redirect to=\"/realtime-chat-application\" />;\r\n  } else {\r\n    return (\r\n      <Layout>\r\n        <Card>\r\n          <form onSubmit={handleSignUp} className=\"authForm\">\r\n            <Title>SIGN UP</Title>\r\n            <Input\r\n              type=\"text\"\r\n              label=\"First name\"\r\n              placeholder=\"\"\r\n              onChange={(value) => setForm({ ...form, firstName: value })}\r\n            />\r\n            <Input\r\n              type=\"text\"\r\n              label=\"Last name\"\r\n              placeholder=\"\"\r\n              onChange={(value) => setForm({ ...form, lastName: value })}\r\n            />\r\n            <Input\r\n              type=\"text\"\r\n              label=\"Email\"\r\n              placeholder=\"\"\r\n              onChange={(value) => setForm({ ...form, email: value })}\r\n            />\r\n            <Input\r\n              type=\"password\"\r\n              label=\"Password\"\r\n              placeholder=\"\"\r\n              onChange={(value) => setForm({ ...form, password: value })}\r\n            />\r\n            {\r\n              auth.error ? <Error>{auth.error}</Error>: <></>\r\n            }\r\n            <Button type=\"submit\">SIGN UP</Button>\r\n          </form>\r\n        </Card>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n","import React, { useState } from \"react\";\r\nimport Layout from \"../../components/Layout\";\r\nimport Input from \"../../components/Layout/UI/Input/index\";\r\nimport Card from \"../../components/Layout/UI/Card/index\";\r\nimport Button from \"../../components/Layout/UI/Button/index\";\r\nimport Title from \"../../components/Layout/UI/Title/index\";\r\nimport Error from \"../../components/Layout/UI/Error/index\";\r\nimport \"./style.scss\";\r\nimport { signIn } from \"../../actions/auth\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport {useFormik} from 'formik'\r\nconst Login = () => {\r\n  const dispatch = useDispatch();\r\n  const auth = useSelector((state) => state.auth);\r\n  const [form, setForm] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  const handleLogin = (e) => {\r\n    e.preventDefault();\r\n    dispatch(signIn(form));\r\n  };\r\n  if (auth.authenticated === true) {\r\n    return <Redirect to=\"/realtime-chat-application\" />;\r\n  } else {\r\n    return (\r\n      <Layout>\r\n        <Card>\r\n          <form onSubmit={handleLogin} className=\"authForm\">\r\n            <Title>Login</Title>\r\n            <Input\r\n              type=\"email\"\r\n              label=\"Email\"\r\n              placeholder=\"\"\r\n              onChange={(value) => setForm({ ...form, email: value })}\r\n            />\r\n            <Input\r\n              type=\"password\"\r\n              label=\"Password\"\r\n              placeholder=\"\"\r\n              onChange={(value) => setForm({ ...form, password: value })}\r\n            />\r\n            {auth.error ? <Error>{auth.error}</Error> : <></>}\r\n            <Button type=\"submit\">LOG IN</Button>\r\n          </form>\r\n        </Card>\r\n      </Layout>\r\n    );\r\n  }\r\n};\r\nexport default Login;\r\n","export default __webpack_public_path__ + \"static/media/noavtar.a69237c0.png\";","import React, { useEffect, useState } from \"react\";\r\nimport Layout from \"../../components/Layout/index\";\r\nimport Button from \"../../components/Layout/UI/Button/index\";\r\nimport \"./style.scss\";\r\nimport {\r\n  AiOutlinePlusCircle,\r\n  AiOutlineFileGif,\r\n  AiOutlinePicture,\r\n  AiOutlineHeart,\r\n  AiOutlinePhone,\r\n  AiOutlineInfoCircle,\r\n  AiOutlineSend,\r\n  AiOutlineCheckCircle,\r\n  AiOutlineArrowLeft,\r\n  AiOutlineUser,\r\n  AiOutlineDelete,\r\n  AiOutlineBell,\r\n  AiOutlineLock,\r\n} from \"react-icons/ai\";\r\nimport { BiLoaderCircle } from \"react-icons/bi\";\r\nimport { RiSendPlaneFill } from \"react-icons/ri\";\r\nimport { BsCameraVideo } from \"react-icons/bs\";\r\nimport { MdTagFaces } from \"react-icons/md\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  getRealTimeConversations,\r\n  getRealTimeUser,\r\n  setSeenMessage,\r\n  updateMessage,\r\n} from \"../../actions\";\r\nimport noavt from \"../../images/noavtar.png\";\r\nimport Title from \"../../components/Layout/UI/Title/index\";\r\nimport { NavLink } from \"react-router-dom\";\r\nconst Home = () => {\r\n  const [isSelected, setIsSelected] = useState(\"\");\r\n  const [userSelected, setUserSelected] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n  const [messageImg, setMessageImg] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n  const [menuSelected, setMenuSelected] = useState(-1);\r\n  const {\r\n    users,\r\n    conversations,\r\n    loadingUser,\r\n    loadingChat,\r\n    lastestDoc,\r\n  } = useSelector((state) => state.user);\r\n  const auth = useSelector((state) => state.auth);\r\n\r\n  const viewUser = () => {\r\n    dispatch(getRealTimeUser(auth.uid));\r\n  };\r\n  useEffect(() => {\r\n    viewUser();\r\n    const container = document.getElementById(\"homePage\")\r\n    window.addEventListener(\"resize\", () => {\r\n      if(container !==null)\r\n      {\r\n        if (window.innerWidth > 1200) {\r\n          container.style.transform = \"translateX(0%)\";\r\n        }\r\n      }\r\n    });\r\n  }, []);\r\n  const selectItem = (index) => {\r\n    if (isSelected !== \"\") {\r\n      const prevItem = document.querySelectorAll(\".friend\")[isSelected];\r\n      prevItem.classList.remove(\"isSelected\");\r\n      const curItem = document.querySelectorAll(\".friend\")[index];\r\n      curItem.classList.add(\"isSelected\");\r\n      setIsSelected(index);\r\n    } else {\r\n      const curItem = document.querySelectorAll(\".friend\")[index];\r\n      curItem.classList.add(\"isSelected\");\r\n      setIsSelected(index);\r\n    }\r\n  };\r\n  const initChat = (user) => {\r\n    const users = { uid_1: auth.uid, uid_2: user.uid };\r\n    setUserSelected(user);\r\n    dispatch(getRealTimeConversations(users));\r\n    if (window.innerWidth <= 1200) {\r\n      document.getElementById(\"homePage\").style.transform = \"translateX(-100%)\";\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (userSelected != \"\") {\r\n      dispatch(\r\n        getRealTimeConversations({\r\n          uid_1: auth.uid,\r\n          uid_2: userSelected.uid,\r\n          type: \"afterSend\",\r\n        })\r\n      );\r\n    }\r\n  }, [userSelected]);\r\n  useEffect(() => {\r\n    if (userSelected !== \"\" && !loadingChat) {\r\n      let chatArea = document.getElementById(\"chatArea\");\r\n      chatArea.scrollTop = chatArea.scrollHeight;\r\n    }\r\n  }, [conversations]);\r\n  useEffect(() => {\r\n    if (messageImg != \"\") {\r\n      img.addEventListener(\"change\", viewFile);\r\n    }\r\n  }, [messageImg]);\r\n\r\n  const img = document.getElementById(\"fileInput\");\r\n  const messImgElement = document.getElementById(\"messageImg\");\r\n  const openFile = (e) => {\r\n    img.click();\r\n    setMessageImg(\"advanced\");\r\n  };\r\n  const viewFile = (e) => {\r\n    const fileSend = document.querySelector(\".fileSend\");\r\n    fileSend.classList.add(\"hasFile\");\r\n    messImgElement.src = URL.createObjectURL(img.files[0]);\r\n  };\r\n\r\n  const submitMessageFile = (e) => {\r\n    e.preventDefault();\r\n    const msgObj = {\r\n      user_uid_1: auth.uid,\r\n      user_uid_2: userSelected.uid,\r\n      file: img.files[0],\r\n    };\r\n\r\n    dispatch(updateMessage({ msgObj: msgObj, type: \"file\" }));\r\n    const fileSend = document.querySelector(\".fileSend\");\r\n    fileSend.classList.remove(\"hasFile\");\r\n    messImgElement.src = \"\";\r\n    dispatch(\r\n      getRealTimeConversations({\r\n        uid_1: auth.uid,\r\n        uid_2: userSelected.uid,\r\n        type: \"afterSend\",\r\n      })\r\n    );\r\n  };\r\n  const submitMessage = (e) => {\r\n    e.preventDefault();\r\n    const msgObj = {\r\n      user_uid_1: auth.uid,\r\n      user_uid_2: userSelected.uid,\r\n      message,\r\n    };\r\n    if (message !== \"\") {\r\n      dispatch(updateMessage({ msgObj: msgObj }));\r\n      dispatch(\r\n        getRealTimeConversations({\r\n          uid_1: auth.uid,\r\n          uid_2: userSelected.uid,\r\n          type: \"afterSend\",\r\n        })\r\n      );\r\n\r\n      // let chatArea = document.getElementById(\"chatArea\");\r\n      // chatArea.scrollTop = chatArea.scrollHeight;\r\n\r\n      setMessage(\"\");\r\n    }\r\n  };\r\n  const handleScroll = () => {\r\n    let body = document.body;\r\n    let chatArea = document.querySelector(\".chatArea\");\r\n    chatArea = chatArea.clientHeight ? chatArea : body;\r\n\r\n    if (chatArea.scrollTop == 0) {\r\n      // const users = { uid_1: auth.uid, uid_2: userSelected.uid,lastestDoc };\r\n      // dispatch(getLoadMoreConversations(users))\r\n      // console.log(users)\r\n    }\r\n  };\r\n  const handleSeen = (e) => {\r\n    dispatch(setSeenMessage({ uid_1: auth.uid, uid_2: userSelected.uid }));\r\n  };\r\n  const handleCloseFriendBox = (e) => {\r\n    e.stopPropagation();\r\n    if (menuSelected >= 0) {\r\n      const myTarget = document.querySelectorAll(\".userMenu\")[menuSelected];\r\n      const clicked = e.target.className;\r\n      if (clicked !== myTarget) {\r\n        myTarget.classList.remove(\"open\");\r\n        setMenuSelected(-1);\r\n      }\r\n    }\r\n  };\r\n  const handleOpenFriendBox = (e, index) => {\r\n    e.stopPropagation();\r\n    document.querySelectorAll(\".userMenu\")[index].classList.add(\"open\");\r\n    setMenuSelected(index);\r\n    if (menuSelected >= 0) {\r\n      document\r\n        .querySelectorAll(\".userMenu\")\r\n        [menuSelected].classList.remove(\"open\");\r\n    }\r\n  };\r\n  const toggleListFriend = () => {\r\n    document.getElementById(\"homePage\").style.transform = \"translateX(0)\";\r\n  };\r\n  return (\r\n    <Layout>\r\n     <div className=\"homepage-wrap\">\r\n     <div id=\"homePage\" className=\"homePage\">\r\n        <div className=\"friendListWrap is-active\">\r\n          {!loadingUser ? (\r\n            <div className=\"friendList\">\r\n              {users.map((item, index) => (\r\n                <div\r\n                  key={index}\r\n                  onClick={() => {\r\n                    initChat(item);\r\n                    selectItem(index);\r\n                  }}\r\n                  className=\"friend\"\r\n                >\r\n                  <div className=\"avatar\">\r\n                    <img\r\n                      src={item.avatarUrl != null ? item.avatarUrl : noavt}\r\n                      alt=\"avatar\"\r\n                    />\r\n                    <span\r\n                      className={item.isOnline ? \"isOnline\" : \"isOffline\"}\r\n                    ></span>\r\n                  </div>\r\n                  <div className=\"friendState\">\r\n                    <p className=\"friendName\">\r\n                      {item.firstName + \" \" + item.lastName}\r\n                    </p>\r\n                    <div className=\"friendLastText\">\r\n                      <p className=\"lastText\">See you again </p>\r\n                      <span></span>\r\n                      <p>4 hours ago</p>\r\n                    </div>\r\n                  </div>\r\n                  <div\r\n                    className=\"friendButton\"\r\n                    onClick={(e) => {\r\n                      index !== menuSelected\r\n                        ? handleOpenFriendBox(e, index)\r\n                        : handleCloseFriendBox(e, index);\r\n                    }}\r\n                  >\r\n                    <button>\r\n                      <div className=\"circle\"></div>\r\n                      <div className=\"circle\"></div>\r\n                      <div className=\"circle\"></div>\r\n                    </button>\r\n                  </div>\r\n                  <div className=\"userMenu\">\r\n                    <div className=\"menuGroup\">\r\n                      <div className=\"menuItem\">\r\n                        <AiOutlineUser className=\"icon\" />\r\n                        <NavLink to={`/profile/${item.key}`}>\r\n                          Go to profile page\r\n                        </NavLink>\r\n                      </div>\r\n                      <div className=\"menuItem\">\r\n                        <AiOutlineBell className=\"icon\" />\r\n                        <span>Turn off notification</span>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"menuGroup\">\r\n                      <div className=\"menuItem\">\r\n                        <AiOutlineDelete className=\"icon\" />\r\n                        <span>Delete conversation</span>\r\n                      </div>\r\n                      <div className=\"menuItem\">\r\n                        <AiOutlineLock className=\"icon\" />\r\n                        <span>Block</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\" loading\">\r\n              <BiLoaderCircle className=\"icon\" />\r\n            </div>\r\n          )}\r\n        </div>\r\n        {userSelected !== \"\" ? (\r\n          <div className=\"chatBox\">\r\n            <div className=\"headBox\">\r\n              <AiOutlineArrowLeft\r\n                onClick={toggleListFriend}\r\n                className=\"icon closeChatbox\"\r\n              />\r\n              <div className=\"headUser\">\r\n                <img\r\n                  alt=\"avatar\"\r\n                  src={\r\n                    userSelected.avatarUrl != null\r\n                      ? userSelected.avatarUrl\r\n                      : noavt\r\n                  }\r\n                />\r\n                <NavLink to={`/profile/${userSelected.key}`}>\r\n                  <p>{userSelected.firstName}</p>\r\n                </NavLink>\r\n              </div>\r\n              <div className=\"headCall\">\r\n                <AiOutlinePhone className=\"icon\" />\r\n                <BsCameraVideo className=\"icon\" />\r\n\r\n                <AiOutlineInfoCircle className=\"icon\" />\r\n              </div>\r\n            </div>\r\n            {!loadingChat ? (\r\n              <div onScroll={handleScroll} id=\"chatArea\" className=\"chatArea\">\r\n                <div className=\"chatAreaWrap\">\r\n                  {conversations.map((item, index) => (\r\n                    <div\r\n                      key={index}\r\n                      className={\r\n                        auth.uid === item.user_uid_1\r\n                          ? \"chatWrapper right\"\r\n                          : \"chatWrapper left\"\r\n                      }\r\n                    >\r\n                      {auth.uid !== item.user_uid_1 ? (\r\n                        <img\r\n                          alt={userSelected.avatarUrl}\r\n                          className=\"avatar\"\r\n                          src={\r\n                            userSelected.avatarUrl != null\r\n                              ? userSelected.avatarUrl\r\n                              : noavt\r\n                          }\r\n                        />\r\n                      ) : (\r\n                        <></>\r\n                      )}\r\n                      {item.type !== \"file\" ? (\r\n                        <div className=\"messageWrap\">\r\n                          <p key={index}>{item.message}</p>\r\n                        </div>\r\n                      ) : (\r\n                        <img\r\n                          className=\"messageFile\"\r\n                          alt={index}\r\n                          src={item.file}\r\n                          key={index}\r\n                        />\r\n                      )}\r\n                      <AiOutlineCheckCircle\r\n                        className={\r\n                          auth.uid === item.user_uid_1 && !item.isView\r\n                            ? \"icon\"\r\n                            : \"icon gone\"\r\n                        }\r\n                      />\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"chatArea loading\">\r\n                <BiLoaderCircle className=\"icon\" />\r\n              </div>\r\n            )}\r\n            <div className=\"typeArea\">\r\n              <div className=\"action\">\r\n                <div className=\"fileSend\">\r\n                  <img alt=\"messageImg\" id=\"messageImg\" />\r\n\r\n                  <div className=\"before\"></div>\r\n                  <AiOutlineSend onClick={submitMessageFile} className=\"icon\" />\r\n                </div>\r\n                <div className=\"actionWrap\">\r\n                  <input type=\"file\" className=\"fileInput\" />\r\n                  <AiOutlinePlusCircle className=\"icon\" />\r\n                </div>\r\n                <div className=\"actionWrap\">\r\n                  <input type=\"file\" id=\"fileInput\" className=\"fileInput\" />\r\n                  <AiOutlinePicture onClick={openFile} className=\"icon\" />\r\n                </div>\r\n                <div className=\"actionWrap\">\r\n                  <input type=\"file\" className=\"fileInput\" />\r\n                  <MdTagFaces className=\"icon\" />\r\n                </div>\r\n                <div className=\"actionWrap\">\r\n                  <input type=\"file\" className=\"fileInput\" />\r\n                  <AiOutlineFileGif className=\"icon\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"input\">\r\n                <form onSubmit={submitMessage}>\r\n                  <input\r\n                    value={message}\r\n                    onClick={() => handleSeen()}\r\n                    onChange={(e) => setMessage(e.target.value)}\r\n                    type=\"text\"\r\n                    placeholder=\"Aa\"\r\n                  />\r\n                </form>\r\n                <MdTagFaces className=\"icon\" />\r\n              </div>\r\n              <div className=\"likeButton\">\r\n                {message === \"\" ? (\r\n                  <AiOutlineHeart className=\"icon\" />\r\n                ) : (\r\n                  <AiOutlineSend onClick={submitMessage} className=\"icon\" />\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"chatBox unSelected\">\r\n            <RiSendPlaneFill className=\"bigIcon\" />\r\n            <Title>Your Message</Title>\r\n            <p>Send private photos and messages to a friend or group.</p>\r\n            <Button>Send a message</Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n     </div>\r\n    </Layout>\r\n  );\r\n};\r\nexport default Home;\r\n","export default __webpack_public_path__ + \"static/media/mint.98ef681e.jpg\";","import React from 'react'\r\nimport { BiLoaderCircle } from \"react-icons/bi\";\r\nimport './styles.scss'\r\nexport default function Loading() {\r\n    return (\r\n        <BiLoaderCircle className='loadingIcon'/>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport \"./style.scss\";\r\nimport Mint from \"../../images/mint.jpg\";\r\nimport {\r\n  AiOutlineSend,\r\n  AiFillHeart,\r\n  AiOutlineHeart,\r\n  AiOutlineClose,\r\n} from \"react-icons/ai\";\r\nimport { VscBookmark } from \"react-icons/vsc\";\r\nimport { BsChat } from \"react-icons/bs\";\r\nimport Button from \"../Layout/UI/Button\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport noavt from '../../images/noavtar.png'\r\nimport Loading from \"../Layout/UI/Loading\";\r\nimport { pushPostComment } from \"../../actions/post\";\r\nimport { getRealtimeInteractions, updateLike } from \"../../actions\";\r\nconst PostDetail = ({auth}) => {\r\n  const dispatch = useDispatch();\r\n  const [replySelected, setReplySelected] = React.useState([]);\r\n  const [commentValue, setCommentValue] = React.useState(\"\");\r\n  const { post, interaction } = useSelector((state) => state);\r\n  const auth_uid = React.useMemo(()=>{\r\n    return auth\r\n  },[auth])\r\n  const interactionArr = React.useMemo(() => {\r\n    return interaction.interactions;\r\n  }, [interaction.interactions]);\r\n  const { item, loading, comments } = React.useMemo(() => {\r\n    return {\r\n      item: post.postByKey.item,\r\n      loading: post.postByKey.loading,\r\n      comments: post.postByKey.comments,\r\n    };\r\n  }, [post.postByKey.item, post.postByKey.comments]);\r\n  React.useEffect(() => {\r\n    dispatch(getRealtimeInteractions(item.key));\r\n  }, [item.key,dispatch]);\r\n  const closePostDetail = () => {\r\n    const postDetail = document.querySelector(\".postDetail\");\r\n    postDetail.classList.remove(\"open\");\r\n    const replies = document.querySelector(\".replies\");\r\n    if (replies != null) {\r\n      replies.classList.remove(\"view\");\r\n      const newArr = [];\r\n      setReplySelected(newArr);\r\n    }\r\n  };\r\n  const hanldePostComment = (e) => {\r\n    e.preventDefault();\r\n    const comment = {\r\n      content: commentValue,\r\n      pid: item.key,\r\n      uid: auth_uid,\r\n    };\r\n    dispatch(pushPostComment(comment));\r\n    setCommentValue(\"\");\r\n  };\r\n  const openReplyComment = (index) => {\r\n    const newArr = [...replySelected];\r\n\r\n    document.querySelectorAll(\".replies\")[index].classList.add(\"view\");\r\n    newArr[index] = true;\r\n    setReplySelected(newArr);\r\n  };\r\n\r\n  const closeReplyComment = (index) => {\r\n    const newArr = [...replySelected];\r\n    document.querySelectorAll(\".replies\")[index].classList.remove(\"view\");\r\n    newArr[index] = false;\r\n    setReplySelected(newArr);\r\n  };\r\n  const handleLikePost = () => {\r\n    const obj = {\r\n      pid: item.key,\r\n      uid: auth_uid,\r\n    };\r\n    dispatch(updateLike(obj));\r\n  };\r\n  const isInArray = (arr)=> {\r\n    console.log(interactionArr)\r\n      if(arr.length>0)\r\n      {\r\n        for (let i =0;i<arr.length;i++) {\r\n          console.log(arr[i].uid)\r\n          if(arr[i].uid===auth_uid)\r\n          {\r\n            return true;\r\n          }\r\n        }\r\n        return false\r\n      }\r\n      else{\r\n        return false\r\n      }\r\n    \r\n  }\r\n  return (\r\n    <div className=\"postDetail\">\r\n      <AiOutlineClose className=\"exit\" onClick={closePostDetail} />\r\n      {loading ? (\r\n        <Loading />\r\n      ) : (\r\n        <div className=\"postWrapper\">\r\n          <div className=\"postImage\">\r\n            <img src={item.file} alt={item.key} />\r\n          </div>\r\n          <div className=\"postStatus\">\r\n            <div className=\"postOwner\">\r\n              <div className=\"ownerAvatar\">\r\n                <div>\r\n                  <img src={item.owner.avatarUrl != null ? item.owner.avatarUrl : noavt} alt={item.key} />\r\n                </div>\r\n                <p>{item.owner.firstName + \" \" + item.owner.lastName}</p>\r\n              </div>\r\n              <div className=\"more\">\r\n                <div className=\"circle\"></div>\r\n                <div className=\"circle\"></div>\r\n                <div className=\"circle\"></div>\r\n              </div>\r\n            </div>\r\n            <div className=\"postDescription\">\r\n              <div className=\"ownerAvatar\">\r\n                <div>\r\n                  <img src={item.owner.avatarUrl != null ? item.owner.avatarUrl : noavt} alt={item.key} />\r\n                </div>\r\n                <p className=\"name\">\r\n                  {item.owner.firstName + \" \" + item.owner.lastName}\r\n                </p>\r\n                <p className=\"status\">{item.status}</p>\r\n              </div>\r\n              <div className=\"postedDate\">\r\n                <p>6d</p>\r\n              </div>\r\n              <div className=\"commentBox\">\r\n                {comments.map((item, index) => (\r\n                  <div key={index} className=\"comment\">\r\n                    <div className=\"ownerImage\">\r\n                      <div className='wrap'>\r\n                      <img\r\n                        src={item.sender.avatarUrl != null ? item.sender.avatarUrl : noavt}\r\n                        alt={item.sender.firstName}\r\n                      />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"ownerDetail\">\r\n                      <div className=\"ownerName\">\r\n                        <div className=\"content\">\r\n                          {\" \"}\r\n                          <p>{item.sender.firstName}</p>\r\n                          <p>{item.content}</p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"reply\">\r\n                        <span>4d</span>\r\n                        <p>Reply</p>\r\n                        <div className=\"heartIcon\">\r\n                          <AiOutlineHeart className=\"icon\" />\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"viewReplies\">\r\n                        <div className=\"line\"></div>\r\n                        {replySelected[index] ? (\r\n                          <p onClick={() => closeReplyComment(index)}>\r\n                            Hide replies(2)\r\n                          </p>\r\n                        ) : (\r\n                          <p onClick={() => openReplyComment(index)}>\r\n                            View replies(2)\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n                      <div className=\"replies\">\r\n                        <div className=\"replyItem\">\r\n                          <div className=\"ownerImage\">\r\n                            <img src={Mint} alt={Mint} />\r\n                          </div>\r\n                          <div className=\"ownerDetail\">\r\n                            <div className=\"ownerName\">\r\n                              <div className=\"content\">\r\n                                {\" \"}\r\n                                <p>mint_stillwalks</p>\r\n                                <p>{item.content}</p>\r\n                              </div>\r\n                            </div>\r\n\r\n                            <div className=\"reply\">\r\n                              <span>4d</span>\r\n                              <p>Reply</p>\r\n                              <div className=\"heartIcon\">\r\n                                <AiOutlineHeart className=\"icon\" />\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              <div className=\"postLiked\">\r\n                <div className=\"iconBox\">\r\n                  <div className=\"likeIcon\">\r\n                    {isInArray(interactionArr) ? (\r\n                      <AiFillHeart onClick={handleLikePost} className=\"icon\" />\r\n                    ) : (\r\n                      <AiOutlineHeart\r\n                        onClick={handleLikePost}\r\n                        className=\"icon\"\r\n                      />\r\n                    )}\r\n\r\n                    <BsChat className=\"icon\" />\r\n                    <AiOutlineSend className=\"icon\" />\r\n                  </div>\r\n                  <div className=\"saveIcon\">\r\n                    <VscBookmark className=\"icon\" />\r\n                  </div>\r\n                </div>\r\n                <div className=\"likedBy\">\r\n                  <p>Liked by {interactionArr.length} peoples</p>\r\n                  <p>{item.createdAt.toDate().toDateString()}</p>\r\n                </div>\r\n              </div>\r\n              <form className=\"commentInput\">\r\n                <div className=\"input\">\r\n                  <input\r\n                    onChange={(e) => setCommentValue(e.target.value)}\r\n                    value={commentValue}\r\n                    id=\"postComment\"\r\n                    placeholder=\"Add comment here\"\r\n                  />\r\n                </div>\r\n                <div className=\"button\">\r\n                  <Button type=\"submit\" onClick={hanldePostComment}>\r\n                    Post\r\n                  </Button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nexport default PostDetail;\r\n","import React from \"react\";\r\nimport \"./style.scss\";\r\nimport { AiOutlineClose, AiOutlinePicture } from \"react-icons/ai\";\r\nimport Mint from \"../../images/mint.jpg\";\r\nimport { BiLock, BiMap } from \"react-icons/bi\";\r\nimport Title from \"../../components/Layout/UI/Title/index\";\r\nimport Button from \"../Layout/UI/Button\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport { pushPost } from \"../../actions/post\";\r\nconst ModalPost = () => {\r\n  const dispatch = useDispatch();\r\n  const auth = useSelector((state) => state.auth);\r\n\r\n  const [postImage, setPostImage] = React.useState(\"\");\r\n\r\n  const closeModalPost = () => {\r\n    document.querySelector(\".modalPost\").classList.remove(\"open\");\r\n  };\r\n  const filePost = document.getElementById(\"filePost\");\r\n  const postImageElement = document.getElementById(\"postImageElement\");\r\n  const openFileInput = () => {\r\n    filePost.click();\r\n    setPostImage(\"advanced\");\r\n  };\r\n  const imageBox = document.querySelector(\".imageBox\");\r\n  const viewFile = (e) => {\r\n \r\n    imageBox.classList.add(\"hasFile\");\r\n\r\n    // console.log(filePost.files.length);\r\n    if (filePost.files.length > 0) {\r\n      postImageElement.src = URL.createObjectURL(filePost.files[0]);\r\n    }\r\n    setPostImage(\"\");\r\n  };\r\n  React.useEffect(() => {\r\n    if (postImage != \"\") {\r\n      filePost.addEventListener(\"change\", viewFile);\r\n    }\r\n  }, [postImage]);\r\n  const handlePost = () => {\r\n    var postText = document.getElementById(\"postText\").value;\r\n    if (filePost.files.length > 0) {\r\n      const post = {\r\n        file: filePost.files[0],\r\n        status: postText,\r\n        uid:auth.uid\r\n      };\r\n      dispatch(pushPost(post));\r\n      imageBox.classList.remove(\"hasFile\");\r\n      postImageElement.src = \"\";\r\n      postText = \"\";\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"modalPost\">\r\n      <div className=\"modalWrapper\">\r\n        <div className=\"head\">\r\n          <div className=\"title\">\r\n            <Title>Make a post</Title>\r\n          </div>\r\n          <AiOutlineClose onClick={closeModalPost} className=\"icon\" />\r\n        </div>\r\n        <div className=\"poster\">\r\n          <div className=\"posterImage\">\r\n            <img src={Mint} />\r\n          </div>\r\n          <div className=\"posterName\">\r\n            <p>Mint</p>\r\n            <div className=\"securityMode\">\r\n              <BiLock className=\"icon\" />\r\n              <span>Private</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"statusBox\">\r\n          <textarea\r\n            id=\"postText\"\r\n            placeholder=\"What are you thinking ?\"\r\n          ></textarea>\r\n          <div className=\"imageBox\">\r\n            <img id=\"postImageElement\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"postButton\">\r\n          <Button onClick={handlePost}>Post</Button>\r\n          <div className=\"postIcon\">\r\n            <input type=\"file\" id=\"filePost\" />\r\n            <AiOutlinePicture onClick={openFileInput} className=\"icon\" />\r\n            <BiMap className=\"icon\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default ModalPost;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport \"./style.scss\";\r\nimport Button from \"../Layout/UI/Button\";\r\nimport Mint from \"../../images/mint.jpg\";\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { updateUserAvatar } from \"../../actions/user\";\r\nconst ModalUpdateAvatar = () => {\r\n    const dispatch = useDispatch()\r\n    const auth = useSelector(state => state.auth)\r\n  const [temp, setTemp] = useState(\"\");\r\n\r\n  const closeModalPost = () => {\r\n    modal.classList.remove('open')\r\n  };\r\n  let fileInput = useRef(null);\r\n  let imgSrc = useRef(null);\r\n  let modal = useRef(null)\r\n  const openFileInput = () => {\r\n    fileInput.click();\r\n    setTemp(\"advanced\");\r\n  };\r\n  const viewPhoto = () => {\r\n    if (fileInput.files.length > 0) {\r\n      imgSrc.src = URL.createObjectURL(fileInput.files[0]);\r\n    }\r\n  };\r\n  const handleUpdateAvatar = ()=>{\r\n      dispatch(updateUserAvatar(auth.uid,fileInput.files[0]))\r\n  }\r\n  useEffect(() => {\r\n    if (temp == \"advanced\") {\r\n      fileInput.addEventListener(\"change\", viewPhoto);\r\n    }\r\n  }, [temp]);\r\n  return (\r\n    <div ref={el=>modal=el} className=\"modalUpdateAvatar\">\r\n      <div className=\"modalWrapper\">\r\n        <AiOutlineClose onClick={closeModalPost} className=\"icon\" />\r\n        <div className=\"modalTitle\">\r\n          <p>Update Avatar</p>\r\n        </div>\r\n        <div className=\"openFile\">\r\n          <button onClick={openFileInput}>Choose a file</button>\r\n          <input\r\n            type=\"file\"\r\n            className=\"input\"\r\n            ref={(el) => {\r\n              fileInput = el;\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"avatarBox\">\r\n          <div className=\"avatarWrap\">\r\n            <img\r\n              id=\"image\"\r\n              ref={(el) => {\r\n                imgSrc = el;\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"updateBtn\">\r\n          <Button onClick={handleUpdateAvatar}>Save</Button>\r\n          <Button onClick={closeModalPost}>Cancel</Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default ModalUpdateAvatar;\r\n","import React from \"react\";\r\nimport Layout from \"../../components/Layout\";\r\nimport Button from \"../../components/Layout/UI/Button/index\";\r\nimport {\r\n  AiOutlineSetting,\r\n  AiOutlinePlusCircle,\r\n  AiOutlineHeart,\r\n  AiOutlineArrowLeft,\r\n  AiOutlineArrowRight\r\n\r\n} from \"react-icons/ai\";\r\nimport { BsChat } from \"react-icons/bs\";\r\nimport \"./style.scss\";\r\nimport PostDetail from \"../../components/PostDetail/index\";\r\nimport ModalPost from \"../../components/ModalPost/index\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { getPostByKey, getUserById } from \"../../actions\";\r\nimport Loading from \"../../components/Layout/UI/Loading/index\";\r\nimport noavt from \"../../images/noavtar.png\";\r\n\r\nimport ModalUpdateAvatar from \"../../components/ModalUpdateAvatar\";\r\n\r\nconst ProfilePage = (props) => {\r\n  const dispatch = useDispatch();\r\n  const { user, auth } = useSelector((state) => state);\r\n\r\n  //use Memo\r\n\r\n  const userByKey = React.useMemo(() => {\r\n    return user.userByKey;\r\n  }, [user.userByKey]);\r\n  const auth_uid = React.useMemo(() => {\r\n    return auth.uid;\r\n  }, [auth.uid]);\r\n  const uidParam = React.useMemo(() => {\r\n    return props.match.params;\r\n  }, [props.match.params]);\r\n\r\n  //end use Memo\r\n\r\n  React.useEffect(() => {\r\n    dispatch(getUserById(uidParam));\r\n  }, [uidParam]);\r\n\r\n  const openPostDetail = (key) => {\r\n    const postDetail = document.querySelector(\".postDetail\");\r\n    postDetail.classList.add(\"open\");\r\n    dispatch(getPostByKey(key, userByKey.uid));\r\n  };\r\n\r\n  const openModalPost = () => {\r\n    document.querySelector(\".modalPost\").classList.add(\"open\");\r\n  };\r\n\r\n  const openModalUpdateAvatar = () => {\r\n    document.querySelector(\".modalUpdateAvatar\").classList.add(\"open\");\r\n  };\r\nconst openSeePost = ()=>{\r\n  document.querySelector('.profile').classList.add('is-active')\r\n}\r\nconst closeSeePost = ()=>{\r\n  document.querySelector('.profile').classList.remove('is-active')\r\n}\r\n  return (\r\n    <Layout>\r\n      <ModalPost />\r\n      <ModalUpdateAvatar />\r\n      <PostDetail auth={auth_uid} />\r\n      {!user.loadingUserByKey ? (\r\n        <div className=\"profile-wrap\">\r\n          <div className=\"profile\">\r\n          <div className=\"profileHead\">\r\n            <div className=\"avatar\">\r\n              <div className=\"avatarWrap\">\r\n                {\r\n                  <img\r\n                    src={\r\n                      userByKey.avatarUrl != null ? userByKey.avatarUrl : noavt\r\n                    }\r\n                    alt=\"avatar\"\r\n                  />\r\n                }\r\n              </div>\r\n              <AiOutlinePlusCircle\r\n                onClick={openModalUpdateAvatar}\r\n                className=\"icon\"\r\n              />\r\n            </div>\r\n            <div className=\"details\">\r\n              <div className=\"userName\">\r\n                <p>{userByKey.firstName + \" \" + userByKey.lastName}</p>\r\n                <Button>\r\n                  {auth_uid === userByKey.uid ? \"Edit Profile\" : \"Follow\"}\r\n                </Button>\r\n                <AiOutlineSetting className=\"icon\" />\r\n              </div>\r\n              <div className=\"userFollow\">\r\n                <p>\r\n                  282 <span>followers</span>\r\n                </p>\r\n                <p>\r\n                  1003 <span>following</span>\r\n                </p>\r\n              </div>\r\n              <div className=\"madeUpName\">\r\n                <p></p>\r\n              </div>\r\n              <div onClick={openSeePost}  className=\"see-post\">\r\n                <Button>See post\r\n                  <AiOutlineArrowRight className='icon'/>\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"post-container-wrap\">\r\n            <div className=\"post-container\">\r\n              {auth_uid === userByKey.uid ? (\r\n                <div className=\"postButton\">\r\n                  <AiOutlineArrowLeft\r\n                  onClick={closeSeePost}\r\n                className=\"icon closePostList\"\r\n              />\r\n                  <Button onClick={openModalPost}>Post something</Button>\r\n                </div>\r\n              ) : (\r\n                <></>\r\n              )}\r\n              <div className=\"allPosts\">\r\n                {userByKey.posts.length > 0 ? (\r\n                  userByKey.posts.map((item) => (\r\n                    <div\r\n                      key={item.key}\r\n                      onClick={() => openPostDetail(item.key)}\r\n                      className=\"post\"\r\n                    >\r\n                      <div className=\"postImage\">\r\n                        <img alt={item.createdAt} src={item.file} />\r\n                      </div>\r\n                      <div className=\"postHover\">\r\n                        <p>\r\n                          <AiOutlineHeart className=\"icon\" /> {item.likeCount}\r\n                        </p>\r\n                        <p>\r\n                          <BsChat className=\"icon\" /> {item.commentCount}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n                ) : (\r\n                  <div className=\"post\">\r\n                    <p>Havent posted anything</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"loadingWrap\">\r\n          <Loading />\r\n        </div>\r\n      )}\r\n    </Layout>\r\n  );\r\n};\r\nexport default ProfilePage;\r\n","import * as React from \"react\";\r\nimport Button from \"../Button\";\r\nimport \"./style.scss\";\r\nexport default function FormChat(props) {\r\n  const onChangeValue = (e)=>{\r\n    props.onChange(e.target.value)\r\n  }\r\n  return (\r\n    <form onSubmit={(e)=>props.handleFunction(e)} style={props.style} className=\"commentInput\">\r\n      <div className=\"input\">\r\n        <input onChange={(e)=>onChangeValue(e)} value={props.value} id=\"postComment\" placeholder=\"Add comment here\" />\r\n      </div>\r\n      <div className=\"button\">\r\n        <Button onClick={(e)=>props.handleFunction(e)} type={props.type}>Post</Button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport Layout from \"../../components/Layout\";\r\nimport \"./style.scss\";\r\nimport testImg from \"../../images/mint.jpg\";\r\nimport { AiOutlineSend, AiOutlineHeart, AiFillHeart } from \"react-icons/ai\";\r\nimport noavt from '../../images/noavtar.png';\r\nimport { BsChat } from \"react-icons/bs\";\r\nimport { VscBookmark } from \"react-icons/vsc\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  getRealTimePostsNewFeed,\r\n  pushPostComment,\r\n  setOffLine,\r\n  updateLike,\r\n} from \"../../actions\";\r\nimport moment from \"moment\";\r\nimport Button from \"../../components/Layout/UI/Button\";\r\nimport FormChat from \"../../components/Layout/UI/FormChat\";\r\nimport { NavLink } from \"react-router-dom\";\r\nconst NewFeedPage = () => {\r\n  const dispatch = useDispatch();\r\n  const [comment, setComment] = useState(\"\");\r\n  const { post, auth } = useSelector((state) => state);\r\n  const posts = React.useMemo(() => {\r\n    return post.posts;\r\n  }, [post.posts]);\r\n  React.useEffect(() => {\r\n    dispatch(getRealTimePostsNewFeed());\r\n  }, []);\r\n  const handleUpdateLike = (pid) => {\r\n    const interaction = {\r\n      pid,\r\n      uid: auth.uid,\r\n    };\r\n    dispatch(updateLike(interaction));\r\n  };\r\n  const isInArray = (arr) => {\r\n    if (arr.length > 0) {\r\n      for (let i = 0; i < arr.length; i++) {\r\n        if (arr[i].uid === auth.uid) {\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n \r\n  const handlePushComment = (e,pid) => {\r\n    e.preventDefault();\r\n  \r\n     if(comment!=='')\r\n     {\r\n      dispatch(pushPostComment({ pid, uid: auth.uid, content: comment }))\r\n      setComment('')\r\n     }\r\n    \r\n  };\r\n  return (\r\n    <Layout>\r\n      <div className=\"newFeed\">\r\n        <div className=\"newFeedWrap\">\r\n          <div className=\"swipeSide\">\r\n            <div className=\"storyLine\">\r\n              <div className=\"storyBox\">\r\n                <div className=\"avatarWrap\">\r\n                  <img src={testImg} alt=\"avatar\" />\r\n                </div>\r\n                <div className=\"nameWrap\">\r\n                  <p>minttran</p>\r\n                </div>\r\n              </div>\r\n              <div className=\"storyBox\">\r\n                <div className=\"avatarWrap\">\r\n                  <img src={testImg} alt=\"avatar\" />\r\n                </div>\r\n                <div className=\"nameWrap\">\r\n                  <p>miran</p>\r\n                </div>\r\n              </div>\r\n              <div className=\"storyBox\">\r\n                <div className=\"avatarWrap\">\r\n                  <img src={testImg} alt=\"avatar\" />\r\n                </div>\r\n                <div className=\"nameWrap\">\r\n                  <p>minttran</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"postWrapper\">\r\n              {posts.map((item, index) => (\r\n                <div key={index} className=\"post\">\r\n                  <NavLink to={`profile/${item.uid}`} className=\"postOwner\">\r\n                    <div className=\"ownerImage\">\r\n                      <img\r\n                        src={\r\n                          item.owner.avatarUrl != null ? item.owner.avatarUrl : noavt\r\n                        }\r\n                        alt=\"avatar owner\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"ownerName\">\r\n                      <p>{item.owner.firstName + \" \" + item.owner.lastName}</p>\r\n                    </div>\r\n                  </NavLink>\r\n                  <div className=\"postImage\">\r\n                    <img src={item.file} alt={item.status} />\r\n                  </div>\r\n                  <div className=\"interactionBox\">\r\n                    <div className=\"button\">\r\n                      {!isInArray(item.interactions) ? (\r\n                        <AiOutlineHeart\r\n                          onClick={() => handleUpdateLike(item.key)}\r\n                          className=\"icon\"\r\n                        />\r\n                      ) : (\r\n                        <AiFillHeart\r\n                          onClick={() => handleUpdateLike(item.key)}\r\n                          className=\"icon\"\r\n                        />\r\n                      )}\r\n                      <BsChat className=\"icon\" />\r\n                      <AiOutlineSend className=\"icon\" />\r\n                    </div>\r\n                    <div className=\"save\">\r\n                      <VscBookmark className=\"icon\" />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"likedBy\">\r\n                    <p>Liked by {item.interactions.length} peoples</p>\r\n                  </div>\r\n                  <div className=\"postContent\">\r\n                    <div className=\"ownerName\">\r\n                      <span className=\"name\">\r\n                        {item.owner.firstName + \" \" + item.owner.lastName}\r\n                      </span>\r\n                      <span className=\"content\">{item.status}</span>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"viewAllComment\">\r\n                    {item.comments.length > 2 ? (\r\n                      <p>View All {item.comments.length} Comments</p>\r\n                    ) : (\r\n                      <></>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"commentBox\">\r\n                    {item.comments.slice(0,2).map((comment, commentIndex) => (\r\n                      <div key={commentIndex} className=\"comment\">\r\n                        <span className=\"name\">\r\n                          {comment.sender.firstName +\r\n                            \" \" +\r\n                            comment.sender.lastName}\r\n                        </span>\r\n                        <span className=\"conent\">{comment.content}</span>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                  <div className=\"createdAt\">\r\n                    <p>{moment(item.createdAt.toDate()).fromNow(true)} ago</p>\r\n                  </div>\r\n                  <FormChat\r\n                    onChange={(value) => setComment(value)}\r\n                    style={{ paddingLeft:10,paddingRight:10}}\r\n                    type=\"submit\"\r\n                    value={comment}\r\n                    handleFunction={(e) => handlePushComment(e,item.key)}\r\n                  />\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\nexport default NewFeedPage;\r\n","import React from \"react\";\r\nimport { Redirect, Route } from \"react-router-dom\";\r\nexport default function PrivateRoute({ component: Component, ...rest }) {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      component={(props) => {\r\n        const user = localStorage.getItem(\"user\")\r\n          ? JSON.parse(localStorage.getItem(\"user\"))\r\n          : null;\r\n        if (user) {\r\n          if (user.auth) {\r\n            return <Component {...props} />;\r\n          } else {\r\n            return <Redirect to=\"/login\" />;\r\n          }\r\n        } else {\r\n          return <Redirect to=\"/login\" />;\r\n        }\r\n      }}\r\n    />\r\n  );\r\n}\r\n","import React, { useMemo } from \"react\";\nimport \"./App.css\";\nimport { BrowserRouter as Router, Redirect, Route } from \"react-router-dom\";\nimport SignUp from \"./containers/SignUpPage/index\";\nimport Login from \"./containers/LoginPage/index\";\nimport Home from \"./containers/HomePage/index\";\nimport Profile from \"./containers/ProfilePage/index\";\nimport NewFeed from \"./containers/NewFeedPage/index\";\nimport PrivateRoute from \"./components/Private/index.js\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { isLoggedInUser, setOffLine } from \"./actions\";\nfunction App() {\n  const dispatch = useDispatch();\n  const auth = useSelector((state) => state.auth);\n  React.useEffect(() => {\n    if (!auth.authenticated) {\n      dispatch(isLoggedInUser());\n    }\n  }, []);\n\n  const routes = [\n    { path: \"/realtime-chat-application\", name: \"Home\", component: Home },\n    { path: \"/login\", name: \"Login\", component: Login },\n    { path: \"/signup\", name: \"Sign Up\", component: SignUp },\n    { path: \"/newfeed\", name: \"New Feed\", component: NewFeed },\n    { path: \"/profile/:uid\", name: \"Profile\", component: Profile },\n  ];\n\n  return (\n    <div className=\"App\">\n      <Router>\n        {routes.map((route) => {\n          return (\n            <div key={route.name}>\n              {route.name === \"Login\" || route.name === \"Sign Up\" ? (\n                <Route path={route.path} component={route.component} exact />\n              ) : (\n                <PrivateRoute path={route.path} component={route.component} />\n              )}\n            </div>\n          );\n        })}\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","import { authConstants } from \"../actions/constants\";\r\n\r\nconst initialState = {\r\n  firstName: \"\",\r\n  lastName: \"\",\r\n  uid: \"\",\r\n  email: \"\",\r\n  avatarUrl: \"\",\r\n  authenticating: false,\r\n  authenticated: false,\r\n  error: null,\r\n  notify: \"\",\r\n  updating : false,\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case `${authConstants.USER_LOGIN}_REQUEST`:\r\n      state = {\r\n        ...state,\r\n        authenticating: true,\r\n      };\r\n      return state;\r\n    case `${authConstants.USER_LOGIN}_SUCCESS`:\r\n      state = {\r\n        ...state,\r\n        firstName: action.payload.user.firstName,\r\n        lastName: action.payload.user.lastName,\r\n        uid: action.payload.user.uid,\r\n        email: action.payload.user.email,\r\n        avatarUrl: action.payload.user.avatarUrl,\r\n        authenticated: true,\r\n        authenticating: false,\r\n        error: null,\r\n      };\r\n      return state;\r\n\r\n    case `${authConstants.USER_LOGIN}_FAILURE`:\r\n      state = {\r\n        ...state,\r\n        authenticated: false,\r\n        authenticating: false,\r\n        error: action.payload.error,\r\n      };\r\n      return state;\r\n\r\n    case `${authConstants.USER_LOGOUT}_REQUEST`:\r\n      return state;\r\n\r\n    case `${authConstants.USER_LOGOUT}_SUCCESS`:\r\n      state = {\r\n        ...initialState,\r\n      };\r\n      return state;\r\n\r\n    case `${authConstants.USER_LOGOUT}_FAILURE`:\r\n      state = {\r\n        ...state,\r\n        error: action.payload.error,\r\n      };\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { userConstants } from \"../actions/constants\";\r\n\r\nconst initialState = {\r\n  users: [],\r\n  conversations: [],\r\n  loadingUser: true,\r\n  loadingChat: true,\r\n  lastestDoc: {},\r\n  loadingUserByKey: false,\r\n  userByKey: {\r\n    posts : []\r\n  },\r\n  error: \"\",\r\n  notify : \"\",\r\n  updating :false,\r\n};\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case `${userConstants.GET_REALTIME_USERS}_REQUEST`:\r\n      state = {\r\n        ...state,\r\n        loadingUser: true,\r\n      };\r\n      return state;\r\n    case `${userConstants.GET_REALTIME_USERS}_SUCCESS`:\r\n      state = {\r\n        ...state,\r\n        loadingUser: false,\r\n        users: action.payload.users,\r\n      };\r\n      return state;\r\n    case `${userConstants.GET_REALTIME_MESSAGE}_REQUEST`:\r\n      state = {\r\n        ...state,\r\n        loadingChat: true,\r\n      };\r\n      return state;\r\n    case `${userConstants.GET_REALTIME_MESSAGE}_SUCCESS`:\r\n      state = {\r\n        ...state,\r\n        loadingChat: false,\r\n        conversations: action.payload.conversations,\r\n        lastestDoc: action.payload.lastDoc,\r\n      };\r\n      return state;\r\n    case `${userConstants.GET_LOADMORE_MESSAGE}_REQUEST`:\r\n      state = {\r\n        ...state,\r\n        loadingChat: true,\r\n      };\r\n      return state;\r\n    case `${userConstants.GET_LOADMORE_MESSAGE}_SUCCESS`:\r\n      state = {\r\n        ...state,\r\n        loadingChat: false,\r\n        conversations: [\r\n          ...action.payload.conversations,\r\n          ...state.conversations,\r\n        ],\r\n        lastestDoc: action.payload.lastestDoc,\r\n      };\r\n      return state;\r\n    case `${userConstants.GET_LOADMORE_MESSAGE}_FAILURE`:\r\n      state = {\r\n        ...state,\r\n      };\r\n      return state;\r\n    case `${userConstants.GET_USER_PROFILE_BY_ID}_REQUEST`:\r\n      state = {\r\n        ...state,\r\n        loadingUserByKey: true,\r\n      };\r\n      return state;\r\n    case `${userConstants.GET_USER_PROFILE_BY_ID}_SUCCESS`:\r\n      state = {\r\n        ...state,\r\n        loadingUserByKey: false,\r\n        userByKey: action.payload.userByKey,\r\n      };\r\n      return state;\r\n    case `${userConstants.GET_USER_PROFILE_BY_ID}_FAILURE`:\r\n      state = {\r\n        ...state,\r\n        error: action.payload.error,\r\n      };\r\n      return state;\r\n      case `${userConstants.UPDATE_USER_AVATAR}_REQUEST`:\r\n        state={\r\n          ...state,\r\n          updating:true\r\n        }\r\n        return state;\r\n      case `${userConstants.UPDATE_USER_AVATAR}_SUCCESS`:\r\n        state = {\r\n          ...state,\r\n          updating : false,\r\n          notify: action.payload.notify,\r\n          userByKey : {\r\n            ...state.userByKey,\r\n            avatarUrl: action.payload.avatarUrl,\r\n          }\r\n        };\r\n        return state;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { postConstants } from \"../actions/constants\";\r\n\r\nconst initialState = {\r\n  posts: [],\r\n  posting: true,\r\n  loadingPosts: true,\r\n  error: null,\r\n  posted: false,\r\n  postByKey: {\r\n    item: {},\r\n    comments: [],\r\n    loading: true,\r\n    error: null,\r\n  },\r\n};\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case `${postConstants.PUSH_POST}_REQUEST`:\r\n      state = {\r\n        ...state,\r\n      };\r\n      return state;\r\n    case `${postConstants.PUSH_POST}_SUCCESS`:\r\n      state = {\r\n        ...state,\r\n        posting: false,\r\n        posted: true,\r\n      };\r\n      return state;\r\n    case `${postConstants.PUSH_POST}_FAILURE`:\r\n      state = {\r\n        ...state,\r\n        posted: false,\r\n        posting: false,\r\n        error: action.payload.error,\r\n      };\r\n    case `${postConstants.GET_REALTIME_POSTS}_REQUEST`:\r\n      state = {\r\n        ...state,\r\n      };\r\n      return state;\r\n    case `${postConstants.GET_REALTIME_POSTS}_SUCCESS`:\r\n      state = {\r\n        ...state,\r\n        loadingPosts: false,\r\n        posts: action.payload.posts,\r\n      };\r\n      return state;\r\n    case `${postConstants.GET_REALTIME_POSTS}_FAILURE`:\r\n      state = {\r\n        ...state,\r\n        loadingPosts: false,\r\n        error: action.payload.error,\r\n      };\r\n      return state;\r\n    case `${postConstants.GET_POST_BY_KEY}_REQUEST`:\r\n      state = {\r\n        ...state,\r\n      };\r\n      return state;\r\n    case `${postConstants.GET_POST_BY_KEY}_SUCCESS`:\r\n      state = {\r\n        ...state,\r\n        postByKey: {\r\n          ...state.postByKey,\r\n          item: action.payload.postItem,\r\n          comments: action.payload.comments,\r\n          loading: false,\r\n          error: null,\r\n        },\r\n      };\r\n      return state;\r\n    case `${postConstants.GET_POST_BY_KEY}_FAILURE`:\r\n      state = {\r\n        ...state,\r\n        postByKey: {\r\n          ...state.postByKey,\r\n          loading: true,\r\n          error: action.payload.error,\r\n        },\r\n      };\r\n      return state;\r\n    case `${postConstants.GET_REALTIME_POSTS_NEW_FEED}_REQUEST`:\r\n      state = {\r\n        ...state,\r\n        loadingPosts: true,\r\n      };\r\n      return state;\r\n    case `${postConstants.GET_REALTIME_POSTS_NEW_FEED}_SUCCESS`:\r\n      debugger\r\n      state = {\r\n        ...state,\r\n        loadingPosts: false,\r\n        posts:action.payload.posts,\r\n        error:'',\r\n        \r\n      };\r\n      return state;\r\n    case `${postConstants.GET_REALTIME_POSTS_NEW_FEED}_FAILURE`:\r\n      state = {\r\n        ...state,\r\n        loadingPosts : false,\r\n        error: action.payload.error,\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { interactionConstants } from \"../actions/constants\";\r\n\r\nconst initialState = {\r\n    interactions : [],\r\n    isLoading : false,\r\n    error : null,\r\n    notify : null,\r\n}\r\nexport default (state = initialState,action)=>{\r\n    switch (action.type) {\r\n        case `${interactionConstants.UPDATE_LIKE}_REQUEST`:\r\n            // state = {\r\n            //     ...state,\r\n            //     interactions : action.payload.interactions,\r\n            //     isLoading:true,\r\n            // }\r\n            return state;\r\n        case `${interactionConstants.GET_REALTIME_INTERACTIONS}_REQUEST`:\r\n            state = {\r\n                ...state,\r\n                isLoading:true,\r\n            };\r\n            return state;\r\n        case `${interactionConstants.GET_REALTIME_INTERACTIONS}_SUCCESS`:\r\n            state = {\r\n                ...state,\r\n                isLoading:false,\r\n                interactions : action.payload.interactions\r\n            }\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n}","import {combineReducers} from 'redux'\r\nimport authReducer from './authReducer'\r\nimport userReducer from './userReducer'\r\nimport postReducer from './postReducer'\r\nimport interactionReducer from './interactionReducer'\r\nconst myReducers = combineReducers({\r\n    auth : authReducer,\r\n    user : userReducer,\r\n    post : postReducer,\r\n    interaction : interactionReducer,\r\n})\r\n\r\nexport default myReducers","import { createStore, applyMiddleware } from \"redux\";\r\nimport rootReducers from \"../reducers/index\";\r\nimport thunk from \"redux-thunk\";\r\nconst store = createStore(\r\n  rootReducers,\r\n  applyMiddleware(thunk),\r\n//   window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n);\r\n\r\nexport default store;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { Provider } from \"react-redux\";\nimport store from './store/index'\nwindow.store = store\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}